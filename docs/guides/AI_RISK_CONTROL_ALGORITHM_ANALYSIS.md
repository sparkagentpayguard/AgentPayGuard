# AIæ”¯ä»˜é£æ§ç®—æ³•åˆ†æä¸ä¼˜åŒ–å»ºè®®

> **ä½œè€…è§†è§’**: ç®—æ³•å·¥ç¨‹å¸ˆ  
> **åˆ†ææ—¥æœŸ**: 2026-01-31  
> **åˆ†æ”¯**: `feature/ai-risk-control-algorithm-analysis`

## ç›®å½•

1. [å½“å‰å®ç°åˆ†æ](#å½“å‰å®ç°åˆ†æ)
2. [ä¸»æµAIæ”¯ä»˜é£æ§ç®—æ³•å®ç°è·¯å¾„](#ä¸»æµaiæ”¯ä»˜é£æ§ç®—æ³•å®ç°è·¯å¾„)
3. [å¯¹æ¯”åˆ†æä¸å·®è·](#å¯¹æ¯”åˆ†æä¸å·®è·)
4. [ä¼˜åŒ–å»ºè®®ä¸å®æ–½è·¯å¾„](#ä¼˜åŒ–å»ºè®®ä¸å®æ–½è·¯å¾„)
5. [æŠ€æœ¯æ¶æ„è®¾è®¡](#æŠ€æœ¯æ¶æ„è®¾è®¡)
6. [å®æ–½ä¼˜å…ˆçº§](#å®æ–½ä¼˜å…ˆçº§)

---

## å½“å‰å®ç°åˆ†æ

### 1.1 ç°æœ‰é£æ§æ¶æ„

**æ ¸å¿ƒç»„ä»¶ï¼š**
- `AIIntentParser` (`src/lib/ai-intent.ts`) - LLMé©±åŠ¨çš„æ„å›¾è§£æå’Œé£é™©è¯„ä¼°
- `evaluatePolicyWithAI` (`src/lib/policy.ts`) - ç­–ç•¥è¯„ä¼°å¼•æ“
- `runAIPayPipeline` (`src/server.ts`) - æ”¯ä»˜æµç¨‹ç¼–æ’

**å½“å‰é£æ§æµç¨‹ï¼š**

```
ç”¨æˆ·è‡ªç„¶è¯­è¨€è¯·æ±‚
    â†“
LLMæ„å›¾è§£æ (parsePaymentIntent)
    â†“
LLMé£é™©è¯„ä¼° (assessRisk)
    â†“
ç­–ç•¥è§„åˆ™æ£€æŸ¥ (evaluatePolicy)
    â”œâ”€ ç™½åå•éªŒè¯
    â”œâ”€ é“¾ä¸Šå†»ç»“çŠ¶æ€æ£€æŸ¥
    â”œâ”€ é‡‘é¢é™åˆ¶
    â””â”€ æ—¥é™é¢æ£€æŸ¥
    â†“
å†³ç­–è¾“å‡º
```

### 1.2 å½“å‰å®ç°ç‰¹ç‚¹

**ä¼˜åŠ¿ï¼š**
1. âœ… **è‡ªç„¶è¯­è¨€ç†è§£** - æ”¯æŒè‡ªç„¶è¯­è¨€æ”¯ä»˜è¯·æ±‚è§£æ
2. âœ… **å¤šAIæä¾›å•†æ”¯æŒ** - OpenAIã€DeepSeekã€Geminiã€Claudeã€Ollamaç­‰
3. âœ… **ç¼“å­˜æœºåˆ¶** - 300ç§’ç¼“å­˜å‡å°‘é‡å¤LLMè°ƒç”¨
4. âœ… **å›é€€æœºåˆ¶** - AIä¸å¯ç”¨æ—¶ä½¿ç”¨è§„åˆ™å¼•æ“
5. âœ… **ä¸Šä¸‹æ–‡æ„ŸçŸ¥** - è€ƒè™‘é’±åŒ…ä½™é¢ã€ä»Šæ—¥æ”¯å‡ºã€å†å²æ”¯ä»˜

**å±€é™æ€§ï¼š**
1. âŒ **å•ä¸€LLMè¯„ä¼°** - ä»…ä¾èµ–LLMçš„æ–‡æœ¬ç†è§£ï¼Œç¼ºä¹ç»“æ„åŒ–ç‰¹å¾å·¥ç¨‹
2. âŒ **æ— æœºå™¨å­¦ä¹ æ¨¡å‹** - æ²¡æœ‰è®­ç»ƒæœ‰ç›‘ç£/æ— ç›‘ç£æ¨¡å‹
3. âŒ **ç‰¹å¾å·¥ç¨‹ç¼ºå¤±** - ç¼ºä¹æ—¶é—´çª—å£ç‰¹å¾ã€è¡Œä¸ºåºåˆ—ç‰¹å¾ã€è®¾å¤‡æŒ‡çº¹ç­‰
4. âŒ **æ— å¼‚å¸¸æ£€æµ‹** - æ²¡æœ‰å­¤ç«‹æ£®æ—ã€DBSCANç­‰å¼‚å¸¸æ£€æµ‹ç®—æ³•
5. âŒ **æ ·æœ¬ä¸å¹³è¡¡æœªå¤„ç†** - æ— æ³•å¤„ç†æ­£è´Ÿæ ·æœ¬ä¸å¹³è¡¡é—®é¢˜
6. âŒ **æ— æ¨¡å‹è®­ç»ƒæµç¨‹** - ç¼ºä¹ç¦»çº¿è®­ç»ƒã€åœ¨çº¿å­¦ä¹ ã€æ¨¡å‹ç‰ˆæœ¬ç®¡ç†
7. âŒ **å®æ—¶æ€§ä¾èµ–LLM** - LLMè°ƒç”¨å»¶è¿Ÿè¾ƒé«˜ï¼ˆé€šå¸¸500ms-2sï¼‰
8. âŒ **å¯è§£é‡Šæ€§æœ‰é™** - LLMè¾“å‡ºç¼ºä¹ç»“æ„åŒ–ç‰¹å¾é‡è¦æ€§åˆ†æ
9. âŒ **æ— A/Bæµ‹è¯•** - æ— æ³•å¯¹æ¯”ä¸åŒæ¨¡å‹æ•ˆæœ
10. âŒ **æ— æ¨¡å‹ç›‘æ§** - ç¼ºä¹PSIã€KSå€¼ã€AUCç­‰ç›‘æ§æŒ‡æ ‡

### 1.3 é£é™©è¯„ä¼°ç»´åº¦

**å½“å‰è€ƒè™‘å› ç´ ï¼š**
- é‡‘é¢å¤§å°ï¼ˆç›¸å¯¹äºé’±åŒ…ä½™é¢å’Œå…¸å‹æ”¯ä»˜ï¼‰
- æ”¶æ¬¾åœ°å€æ ¼å¼å’Œæœ‰æ•ˆæ€§
- æ”¯ä»˜ç›®çš„æ¸…æ™°åº¦
- é’±åŒ…ä½™é¢å’Œä»Šæ—¥æ”¯å‡º
- å†å²æ”¯ä»˜æ¨¡å¼ï¼ˆä½†å®é™…æœªä½¿ç”¨ï¼‰

**ç¼ºå¤±ç»´åº¦ï¼š**
- æ—¶é—´ç‰¹å¾ï¼ˆäº¤æ˜“æ—¶é—´ã€é¢‘ç‡ã€é—´éš”ï¼‰
- è¡Œä¸ºåºåˆ—ç‰¹å¾ï¼ˆæ”¯ä»˜æ¨¡å¼ã€é‡‘é¢åˆ†å¸ƒï¼‰
- åœ°å€å…³è”åˆ†æï¼ˆåœ°å€ä¿¡èª‰ã€å†å²äº¤æ˜“ï¼‰
- è®¾å¤‡/ä¼šè¯ç‰¹å¾
- å¼‚å¸¸æ¨¡å¼è¯†åˆ«ï¼ˆçªç„¶å¤§é¢ã€å¼‚å¸¸æ—¶é—´ã€åœ°å€å˜æ›´ï¼‰

---

## ä¸»æµAIæ”¯ä»˜é£æ§ç®—æ³•å®ç°è·¯å¾„

### 2.1 ä¸šç•Œæœ€ä½³å®è·µæ¶æ„

**åŒå±‚å†³ç­–æœºåˆ¶ï¼ˆæ”¯ä»˜å®AlphaRiskã€å…´ä¸šé“¶è¡Œç­‰ï¼‰ï¼š**

```
å®æ—¶è¯·æ±‚
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è§„åˆ™å¼•æ“ï¼ˆä¸“å®¶è§„åˆ™ï¼‰                â”‚
â”‚  - ç™½åå•/é»‘åå•                     â”‚
â”‚  - é‡‘é¢é™åˆ¶                         â”‚
â”‚  - é¢‘ç‡é™åˆ¶                         â”‚
â”‚  - é“¾ä¸ŠçŠ¶æ€æ£€æŸ¥                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“ (è§„åˆ™é€šè¿‡)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æœºå™¨å­¦ä¹ æ¨¡å‹ï¼ˆå®æ—¶é¢„ä¼°ï¼‰            â”‚
â”‚  - ç‰¹å¾å·¥ç¨‹æœåŠ¡                     â”‚
â”‚  - æ¨¡å‹é¢„ä¼°API                      â”‚
â”‚  - å¼‚å¸¸æ£€æµ‹æ¨¡å‹                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
å†³ç­–èåˆï¼ˆè§„åˆ™ + æ¨¡å‹åˆ†æ•°ï¼‰
    â†“
æœ€ç»ˆå†³ç­–
```

### 2.2 æ ¸å¿ƒç®—æ³•æ ˆ

#### 2.2.1 æœ‰ç›‘ç£å­¦ä¹ æ¨¡å‹

**ä¸»æµé€‰æ‹©ï¼š**
1. **XGBoost** â­â­â­â­â­
   - ä¼˜åŠ¿ï¼šå¤„ç†ç±»åˆ«ä¸å¹³è¡¡ã€è‡ªåŠ¨å¤„ç†ç¼ºå¤±å€¼ã€ç‰¹å¾é‡è¦æ€§ã€å®æ—¶é¢„ä¼°å¿«ï¼ˆ20mså†…ï¼‰
   - åº”ç”¨ï¼šæ”¯ä»˜å®ã€å…´ä¸šé“¶è¡Œç­‰ä¸»æµå¹³å°
   - é€‚ç”¨åœºæ™¯ï¼šæœ‰æ ‡ç­¾å†å²æ•°æ®å……è¶³æ—¶

2. **GBDT / LightGBM**
   - ä¼˜åŠ¿ï¼šæ¢¯åº¦æå‡ã€ç‰¹å¾äº¤äº’ã€å¯è§£é‡Šæ€§
   - é€‚ç”¨åœºæ™¯ï¼šå¤§è§„æ¨¡ç‰¹å¾å·¥ç¨‹

3. **é€»è¾‘å›å½’**
   - ä¼˜åŠ¿ï¼šå¯è§£é‡Šæ€§å¼ºã€åŸºçº¿æ¨¡å‹ã€ç‰¹å¾ç³»æ•°æ¸…æ™°
   - é€‚ç”¨åœºæ™¯ï¼šéœ€è¦å¼ºå¯è§£é‡Šæ€§çš„åœºæ™¯

#### 2.2.2 æ— ç›‘ç£å¼‚å¸¸æ£€æµ‹

**ä¸»æµé€‰æ‹©ï¼š**
1. **å­¤ç«‹æ£®æ— (Isolation Forest)** â­â­â­â­
   - ä¼˜åŠ¿ï¼šæ— æ ‡ç­¾è®­ç»ƒã€è¯†åˆ«å¼‚å¸¸æ¨¡å¼ã€é€‚åˆå¥—ç°æ£€æµ‹
   - å±€é™ï¼šç‰¹å¾å¤šæ—¶æ€§èƒ½ä¸‹é™
   - åº”ç”¨ï¼šæ”¯ä»˜å®å¥—ç°è¯†åˆ«

2. **DBSCANèšç±»**
   - ä¼˜åŠ¿ï¼šè®¾å¤‡æŒ‡çº¹èšç±»ã€è¡Œä¸ºæ¨¡å¼èšç±»
   - é€‚ç”¨åœºæ™¯ï¼šè®¾å¤‡å…³è”åˆ†æ

3. **AutoEncoder**
   - ä¼˜åŠ¿ï¼šæ·±åº¦ç‰¹å¾å­¦ä¹ ã€å¼‚å¸¸é‡æ„è¯¯å·®
   - é€‚ç”¨åœºæ™¯ï¼šå¤æ‚è¡Œä¸ºåºåˆ—

#### 2.2.3 åŠç›‘ç£/ä¸»åŠ¨å­¦ä¹ 

**Active Learning + PU Learning** â­â­â­â­â­
- ä¼˜åŠ¿ï¼šæ ‡æ³¨æ ·æœ¬æœ‰é™æ—¶ï¼Œç›¸æ¯”å­¤ç«‹æ£®æ—æå‡3å€è¯†åˆ«é‡ï¼ˆæ”¯ä»˜å®å®è·µï¼‰
- æ–¹æ³•ï¼šä¸»åŠ¨é€‰æ‹©é«˜ä»·å€¼æ ·æœ¬æ ‡æ³¨ï¼ŒPU Learningå¤„ç†æ­£æ ·æœ¬å’Œæœªæ ‡æ³¨æ ·æœ¬
- é€‚ç”¨åœºæ™¯ï¼šå†·å¯åŠ¨ã€æ ‡æ³¨æˆæœ¬é«˜

### 2.3 ç‰¹å¾å·¥ç¨‹ä½“ç³»

**æ ¸å¿ƒç‰¹å¾ç±»åˆ«ï¼š**

1. **æ—¶é—´çª—å£ç‰¹å¾**
   - 1å°æ—¶/24å°æ—¶/7å¤©/30å¤©äº¤æ˜“æ¬¡æ•°ã€é‡‘é¢ã€å¹³å‡é‡‘é¢
   - äº¤æ˜“æ—¶é—´åˆ†å¸ƒï¼ˆå·¥ä½œæ—¥/å‘¨æœ«ã€ç™½å¤©/å¤œé—´ï¼‰
   - äº¤æ˜“é—´éš”ç»Ÿè®¡

2. **è¡Œä¸ºåºåˆ—ç‰¹å¾**
   - æ”¯ä»˜é‡‘é¢åºåˆ—ï¼ˆæœ€è¿‘Nç¬”ï¼‰
   - æ”¶æ¬¾åœ°å€åºåˆ—ï¼ˆæœ€è¿‘Nç¬”ï¼‰
   - æ”¯ä»˜ç›®çš„åºåˆ—
   - é‡‘é¢å˜åŒ–è¶‹åŠ¿ï¼ˆé€’å¢/é€’å‡/æ³¢åŠ¨ï¼‰

3. **åœ°å€å…³è”ç‰¹å¾**
   - åœ°å€å†å²äº¤æ˜“æ¬¡æ•°ã€æ€»é‡‘é¢
   - åœ°å€ä¿¡èª‰è¯„åˆ†ï¼ˆåŸºäºå†å²ï¼‰
   - åœ°å€å…³è”çš„å…¶ä»–åœ°å€æ•°é‡
   - åœ°å€é¦–æ¬¡å‡ºç°æ—¶é—´

4. **ç”¨æˆ·ç”»åƒç‰¹å¾**
   - ç”¨æˆ·å†å²æ”¯ä»˜æ€»é¢ã€å¹³å‡é‡‘é¢
   - ç”¨æˆ·å¸¸ç”¨æ”¶æ¬¾åœ°å€åˆ—è¡¨
   - ç”¨æˆ·æ”¯ä»˜æ—¶é—´åå¥½
   - ç”¨æˆ·é£é™©å†å²ï¼ˆè¢«æ‹’ç»æ¬¡æ•°ï¼‰

5. **è®¾å¤‡/ä¼šè¯ç‰¹å¾**ï¼ˆWeb3åœºæ™¯å¯æ‰©å±•ï¼‰
   - é’±åŒ…åœ°å€å…³è”çš„è®¾å¤‡æŒ‡çº¹
   - ä¼šè¯æ—¶é•¿ã€æ“ä½œåºåˆ—
   - IPåœ°å€ã€åœ°ç†ä½ç½®ï¼ˆå¦‚å¯ç”¨ï¼‰

6. **é“¾ä¸Šç‰¹å¾**ï¼ˆWeb3ç‰¹æœ‰ï¼‰
   - åœ°å€é“¾ä¸Šäº¤æ˜“å†å²
   - åœ°å€ä»£å¸æŒæœ‰æƒ…å†µ
   - åœ°å€åˆçº¦äº¤äº’å†å²
   - åœ°å€Gasä½¿ç”¨æ¨¡å¼

### 2.4 æ ·æœ¬ä¸å¹³è¡¡å¤„ç†

**ä¸»æµæ–¹æ³•ï¼š**

1. **SMOTEè¿‡é‡‡æ ·** â­â­â­â­
   - åŠ¨æ€å¯†åº¦æ„ŸçŸ¥SMOTEï¼šåªåœ¨å†³ç­–è¾¹ç•Œè¿‡é‡‡æ ·
   - é¿å…è¿‡åº¦æ‹Ÿåˆ

2. **ç±»æƒé‡è°ƒæ•´**
   - XGBoostçš„`scale_pos_weight`å‚æ•°
   - æ ¹æ®æ­£è´Ÿæ ·æœ¬æ¯”ä¾‹è°ƒæ•´

3. **é›†æˆæ–¹æ³•**
   - EasyEnsembleã€BalanceCascade

### 2.5 å®æ—¶åœ¨çº¿é¢„ä¼°

**æŠ€æœ¯æ¶æ„ï¼š**

```
ç‰¹å¾å·¥ç¨‹æœåŠ¡ï¼ˆå®æ—¶è®¡ç®—ï¼‰
    â†“
ç‰¹å¾å‘é‡ï¼ˆ2000ä¸‡ç»´ â†’ å‹ç¼©ï¼‰
    â†“
æ¨¡å‹é¢„ä¼°APIï¼ˆ20mså†…å“åº”ï¼‰
    â†“
é£é™©åˆ†æ•°è¾“å‡º
```

**å…³é”®ä¼˜åŒ–ï¼š**
- ç‰¹å¾é¢„è®¡ç®—å’Œç¼“å­˜
- æ¨¡å‹å‹ç¼©ï¼ˆç‰¹å¾é€‰æ‹©ã€æ¨¡å‹å‰ªæï¼‰
- åˆ†å¸ƒå¼é¢„ä¼°æœåŠ¡
- å¼‚æ­¥ç‰¹å¾è®¡ç®—

### 2.6 æ¨¡å‹è¯„ä¼°ä¸ç›‘æ§

**å…³é”®æŒ‡æ ‡ï¼š**

1. **æ¨¡å‹æ•ˆæœæŒ‡æ ‡**
   - AUC-ROCï¼ˆæ•´ä½“åŒºåˆ†èƒ½åŠ›ï¼‰
   - KSå€¼ï¼ˆæœ€å¤§åŒºåˆ†åº¦ï¼‰
   - ç²¾ç¡®ç‡/å¬å›ç‡ï¼ˆä¸šåŠ¡å¹³è¡¡ï¼‰
   - F1-Scoreã€PR-AUC

2. **æ¨¡å‹ç¨³å®šæ€§æŒ‡æ ‡**
   - PSIï¼ˆç¾¤ä½“ç¨³å®šåº¦ï¼‰
   - ç‰¹å¾åˆ†å¸ƒå˜åŒ–
   - é¢„æµ‹åˆ†æ•°åˆ†å¸ƒå˜åŒ–

3. **ä¸šåŠ¡æŒ‡æ ‡**
   - æ‹¦æˆªç‡
   - è¯¯æ‹¦æˆªç‡
   - æŸå¤±é‡‘é¢
   - ç”¨æˆ·ä½“éªŒå½±å“

### 2.7 æ¨¡å‹è¿­ä»£æµç¨‹

**å®Œæ•´ç”Ÿå‘½å‘¨æœŸï¼š**

```
1. æ•°æ®æ”¶é›†ä¸æ ‡æ³¨
    â†“
2. ç‰¹å¾å·¥ç¨‹
    â†“
3. æ¨¡å‹è®­ç»ƒï¼ˆç¦»çº¿ï¼‰
    â†“
4. æ¨¡å‹è¯„ä¼°ï¼ˆAUCã€KSã€PSIï¼‰
    â†“
5. A/Bæµ‹è¯•ï¼ˆå°æµé‡ï¼‰
    â†“
6. å…¨é‡ä¸Šçº¿
    â†“
7. ç›‘æ§ä¸åé¦ˆæ”¶é›†
    â†“
8. å¢é‡/å…¨é‡æ›´æ–°ï¼ˆå®šæœŸï¼‰
```

---

## å¯¹æ¯”åˆ†æä¸å·®è·

### 3.1 æ¶æ„å¯¹æ¯”

| ç»´åº¦ | å½“å‰å®ç° | ä¸»æµå®è·µ | å·®è· |
|------|---------|---------|------|
| **å†³ç­–æœºåˆ¶** | LLMå•ä¸€è¯„ä¼° | è§„åˆ™å¼•æ“ + MLæ¨¡å‹åŒå±‚ | âš ï¸ ç¼ºå°‘MLæ¨¡å‹å±‚ |
| **ç‰¹å¾å·¥ç¨‹** | åŸºç¡€ä¸Šä¸‹æ–‡ï¼ˆä½™é¢ã€æ”¯å‡ºï¼‰ | 2000ä¸‡ç»´ç‰¹å¾ä½“ç³» | âš ï¸ ç‰¹å¾ç»´åº¦ä¸¥é‡ä¸è¶³ |
| **æ¨¡å‹ç±»å‹** | LLMï¼ˆGPTç±»ï¼‰ | XGBoost + å­¤ç«‹æ£®æ— + é€»è¾‘å›å½’ | âš ï¸ æ— ä¼ ç»ŸMLæ¨¡å‹ |
| **å®æ—¶æ€§** | 500ms-2sï¼ˆLLMè°ƒç”¨ï¼‰ | 20msï¼ˆæ¨¡å‹é¢„ä¼°ï¼‰ | âš ï¸ å»¶è¿Ÿé«˜25-100å€ |
| **å¼‚å¸¸æ£€æµ‹** | æ—  | å­¤ç«‹æ£®æ—ã€DBSCAN | âš ï¸ å®Œå…¨ç¼ºå¤± |
| **æ ·æœ¬å¤„ç†** | æ—  | SMOTEã€ç±»æƒé‡è°ƒæ•´ | âš ï¸ æ— æ³•å¤„ç†ä¸å¹³è¡¡ |
| **æ¨¡å‹è®­ç»ƒ** | æ—  | ç¦»çº¿è®­ç»ƒ + åœ¨çº¿å­¦ä¹  | âš ï¸ æ— è®­ç»ƒæµç¨‹ |
| **ç›‘æ§æŒ‡æ ‡** | æ—  | AUCã€KSã€PSI | âš ï¸ æ— æ¨¡å‹ç›‘æ§ |

### 3.2 åŠŸèƒ½å¯¹æ¯”

| åŠŸèƒ½æ¨¡å— | å½“å‰å®ç° | ä¸»æµå®è·µ | ä¼˜å…ˆçº§ |
|---------|---------|---------|--------|
| **æ„å›¾è§£æ** | âœ… LLMè§£æ | âœ… LLMè§£æ | âœ… å·²å®ç° |
| **é£é™©è¯„ä¼°** | âš ï¸ LLMè¯„åˆ† | âœ… MLæ¨¡å‹è¯„åˆ† | ğŸ”´ é«˜ä¼˜å…ˆçº§ |
| **å¼‚å¸¸æ£€æµ‹** | âŒ æ—  | âœ… å­¤ç«‹æ£®æ— | ğŸ”´ é«˜ä¼˜å…ˆçº§ |
| **ç‰¹å¾å·¥ç¨‹** | âš ï¸ åŸºç¡€ç‰¹å¾ | âœ… å®Œæ•´ç‰¹å¾ä½“ç³» | ğŸ”´ é«˜ä¼˜å…ˆçº§ |
| **å®æ—¶é¢„ä¼°** | âš ï¸ LLMå»¶è¿Ÿé«˜ | âœ… 20msæ¨¡å‹é¢„ä¼° | ğŸŸ¡ ä¸­ä¼˜å…ˆçº§ |
| **æ¨¡å‹è®­ç»ƒ** | âŒ æ—  | âœ… å®Œæ•´è®­ç»ƒæµç¨‹ | ğŸŸ¡ ä¸­ä¼˜å…ˆçº§ |
| **A/Bæµ‹è¯•** | âŒ æ—  | âœ… A/Bæµ‹è¯•æ¡†æ¶ | ğŸŸ¢ ä½ä¼˜å…ˆçº§ |
| **æ¨¡å‹ç›‘æ§** | âŒ æ—  | âœ… PSIã€KSç›‘æ§ | ğŸŸ¡ ä¸­ä¼˜å…ˆçº§ |

### 3.3 æ€§èƒ½å¯¹æ¯”

| æŒ‡æ ‡ | å½“å‰å®ç° | ä¸»æµå®è·µ | å·®è· |
|------|---------|---------|------|
| **å•æ¬¡è¯„ä¼°å»¶è¿Ÿ** | 500ms-2s | 20ms | **25-100å€** |
| **ç‰¹å¾ç»´åº¦** | ~5ç»´ | 2000ä¸‡ç»´ | **400ä¸‡å€** |
| **è¯†åˆ«å‡†ç¡®ç‡** | æœªçŸ¥ï¼ˆæ— è¯„ä¼°ï¼‰ | å¬å›ç‡ç›¸åŒä¸‹å‡†ç¡®ç‡æå‡6å€ | **æœªçŸ¥** |
| **å¯è§£é‡Šæ€§** | LLMæ–‡æœ¬è§£é‡Š | ç‰¹å¾é‡è¦æ€§ + è§„åˆ™ | **ä¸­ç­‰** |
| **æˆæœ¬** | LLM APIè°ƒç”¨æˆæœ¬ | æ¨¡å‹æ¨ç†æˆæœ¬ä½ | **é«˜** |

---

## ä¼˜åŒ–å»ºè®®ä¸å®æ–½è·¯å¾„

### 4.1 çŸ­æœŸä¼˜åŒ–ï¼ˆ1-2ä¸ªæœˆï¼‰

#### 4.1.1 å¢å¼ºç‰¹å¾å·¥ç¨‹ â­â­â­â­â­

**ç›®æ ‡ï¼š** ä»5ç»´åŸºç¡€ç‰¹å¾æ‰©å±•åˆ°50+ç»´ç»“æ„åŒ–ç‰¹å¾

**å®æ–½æ­¥éª¤ï¼š**

1. **æ—¶é—´çª—å£ç‰¹å¾**
```typescript
// src/lib/features/time-window.ts
export interface TimeWindowFeatures {
  // 1å°æ—¶çª—å£
  txCount1h: number;
  txAmount1h: number;
  avgAmount1h: number;
  
  // 24å°æ—¶çª—å£
  txCount24h: number;
  txAmount24h: number;
  avgAmount24h: number;
  
  // 7å¤©çª—å£
  txCount7d: number;
  txAmount7d: number;
  avgAmount7d: number;
  
  // æ—¶é—´åˆ†å¸ƒ
  isWeekend: boolean;
  hourOfDay: number;
  dayOfWeek: number;
}
```

2. **è¡Œä¸ºåºåˆ—ç‰¹å¾**
```typescript
// src/lib/features/behavior-sequence.ts
export interface BehaviorSequenceFeatures {
  // æœ€è¿‘5ç¬”äº¤æ˜“é‡‘é¢åºåˆ—
  recentAmounts: number[];
  
  // é‡‘é¢å˜åŒ–è¶‹åŠ¿
  amountTrend: 'increasing' | 'decreasing' | 'stable' | 'volatile';
  
  // æ”¶æ¬¾åœ°å€å˜åŒ–
  recipientChangeRate: number; // æœ€è¿‘10ç¬”ä¸­åœ°å€å˜åŒ–æ¯”ä¾‹
  
  // æ”¯ä»˜ç›®çš„å¤šæ ·æ€§
  purposeDiversity: number; // æœ€è¿‘10ç¬”ä¸­ä¸åŒç›®çš„æ•°é‡
}
```

3. **åœ°å€å…³è”ç‰¹å¾**
```typescript
// src/lib/features/address-association.ts
export interface AddressAssociationFeatures {
  // åœ°å€å†å²ç»Ÿè®¡
  addressTxCount: number;
  addressTotalAmount: number;
  addressAvgAmount: number;
  addressFirstSeenDays: number; // é¦–æ¬¡å‡ºç°è·ä»Šå¤©æ•°
  
  // åœ°å€ä¿¡èª‰ï¼ˆåŸºäºå†å²ï¼‰
  addressRiskScore: number; // 0-100
  
  // åœ°å€å…³è”åº¦
  addressAssociationCount: number; // å…³è”çš„å…¶ä»–åœ°å€æ•°é‡
}
```

4. **ç”¨æˆ·ç”»åƒç‰¹å¾**
```typescript
// src/lib/features/user-profile.ts
export interface UserProfileFeatures {
  // ç”¨æˆ·å†å²ç»Ÿè®¡
  userTotalTxCount: number;
  userTotalAmount: number;
  userAvgAmount: number;
  
  // ç”¨æˆ·å¸¸ç”¨åœ°å€
  userTopRecipients: string[]; // å‰5ä¸ªå¸¸ç”¨æ”¶æ¬¾åœ°å€
  
  // ç”¨æˆ·é£é™©å†å²
  userRejectCount: number; // å†å²è¢«æ‹’ç»æ¬¡æ•°
  userRiskHistory: number[]; // å†å²é£é™©åˆ†æ•°åºåˆ—
}
```

5. **é“¾ä¸Šç‰¹å¾ï¼ˆWeb3ç‰¹æœ‰ï¼‰**
```typescript
// src/lib/features/onchain.ts
export interface OnchainFeatures {
  // é“¾ä¸Šäº¤æ˜“å†å²
  onchainTxCount: number;
  onchainTotalVolume: number;
  
  // ä»£å¸æŒæœ‰
  tokenHoldings: Record<string, number>; // ä»£å¸åœ°å€ -> ä½™é¢
  
  // åˆçº¦äº¤äº’
  contractInteractionCount: number;
  contractTypes: string[]; // äº¤äº’çš„åˆçº¦ç±»å‹ï¼ˆDEXã€NFTç­‰ï¼‰
  
  // Gasä½¿ç”¨æ¨¡å¼
  avgGasPrice: number;
  gasUsagePattern: 'normal' | 'high' | 'low';
}
```

**å®æ–½ä¼˜å…ˆçº§ï¼š** ğŸ”´ **P0 - ç«‹å³å®æ–½**

#### 4.1.2 å¼•å…¥XGBoostæ¨¡å‹ â­â­â­â­â­

**ç›®æ ‡ï¼š** è®­ç»ƒXGBoostæ¨¡å‹æ›¿ä»£/è¡¥å……LLMè¯„ä¼°

**å®æ–½æ­¥éª¤ï¼š**

1. **æ•°æ®æ”¶é›†ä¸æ ‡æ³¨**
```typescript
// src/lib/ml/data-collection.ts
export interface TrainingSample {
  features: FeatureVector;
  label: 0 | 1; // 0=æ­£å¸¸, 1=é£é™©
  timestamp: Date;
  metadata: {
    intent: PaymentIntent;
    context: RiskContext;
    actualOutcome: 'approved' | 'rejected' | 'fraud';
  };
}
```

2. **æ¨¡å‹è®­ç»ƒè„šæœ¬**
```python
# scripts/train_xgboost_model.py
import xgboost as xgb
import pandas as pd
from sklearn.model_selection import train_test_split
from sklearn.metrics import roc_auc_score, classification_report

# åŠ è½½ç‰¹å¾æ•°æ®
df = pd.read_csv('data/training_samples.csv')

# ç‰¹å¾å·¥ç¨‹
X = df.drop(['label', 'timestamp'], axis=1)
y = df['label']

# å¤„ç†æ ·æœ¬ä¸å¹³è¡¡
scale_pos_weight = (y == 0).sum() / (y == 1).sum()

# è®­ç»ƒXGBoost
model = xgb.XGBClassifier(
    n_estimators=100,
    max_depth=6,
    learning_rate=0.1,
    scale_pos_weight=scale_pos_weight,
    eval_metric='auc'
)

X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.2)
model.fit(X_train, y_train, eval_set=[(X_test, y_test)])

# è¯„ä¼°
y_pred_proba = model.predict_proba(X_test)[:, 1]
auc = roc_auc_score(y_test, y_pred_proba)
print(f'AUC: {auc}')

# ä¿å­˜æ¨¡å‹
model.save_model('models/xgboost_risk_model.json')
```

3. **æ¨¡å‹æœåŠ¡æ¥å£**
```typescript
// src/lib/ml/xgboost-predictor.ts
import * as xgb from 'ml-xgboost'; // æˆ–ä½¿ç”¨Pythonå­è¿›ç¨‹è°ƒç”¨

export class XGBoostRiskPredictor {
  private model: any;
  
  async loadModel(modelPath: string) {
    // åŠ è½½XGBoostæ¨¡å‹
    this.model = await loadXGBoostModel(modelPath);
  }
  
  async predict(features: FeatureVector): Promise<{
    score: number; // 0-100é£é™©åˆ†æ•°
    probability: number; // 0-1é£é™©æ¦‚ç‡
    featureImportance: Record<string, number>;
  }> {
    const featureArray = this.featureVectorToArray(features);
    const probability = this.model.predict(featureArray)[0];
    const score = probability * 100;
    
    // è·å–ç‰¹å¾é‡è¦æ€§
    const importance = this.model.getFeatureImportance();
    
    return {
      score,
      probability,
      featureImportance: this.arrayToFeatureImportance(importance)
    };
  }
}
```

4. **é›†æˆåˆ°ç°æœ‰æµç¨‹**
```typescript
// src/lib/policy.ts (ä¿®æ”¹)
export async function evaluatePolicyWithAI(args: {...}) {
  // ... ç°æœ‰ä»£ç  ...
  
  // æ–°å¢ï¼šXGBoostæ¨¡å‹è¯„ä¼°
  if (xgboostPredictor && features) {
    const mlAssessment = await xgboostPredictor.predict(features);
    
    // èåˆLLMå’ŒMLæ¨¡å‹åˆ†æ•°
    const finalScore = combineScores(
      aiAssessment?.score || 50,
      mlAssessment.score,
      weights: { llm: 0.3, ml: 0.7 } // MLæ¨¡å‹æƒé‡æ›´é«˜
    );
    
    aiAssessment = {
      ...aiAssessment,
      score: finalScore,
      mlScore: mlAssessment.score,
      featureImportance: mlAssessment.featureImportance
    };
  }
  
  // ... åç»­å†³ç­–é€»è¾‘ ...
}
```

**å®æ–½ä¼˜å…ˆçº§ï¼š** ğŸ”´ **P0 - ç«‹å³å®æ–½**

#### 4.1.3 å¼•å…¥å­¤ç«‹æ£®æ—å¼‚å¸¸æ£€æµ‹ â­â­â­â­

**ç›®æ ‡ï¼š** æ— æ ‡ç­¾å¼‚å¸¸æ£€æµ‹ï¼Œè¯†åˆ«å¼‚å¸¸æ”¯ä»˜æ¨¡å¼

**å®æ–½æ­¥éª¤ï¼š**

1. **å¼‚å¸¸æ£€æµ‹æœåŠ¡**
```typescript
// src/lib/ml/anomaly-detection.ts
import { IsolationForest } from 'ml-isolation-forest';

export class AnomalyDetector {
  private model: IsolationForest;
  
  async train(features: FeatureVector[]) {
    // ä½¿ç”¨æ­£å¸¸äº¤æ˜“è®­ç»ƒ
    const featureMatrix = features.map(f => this.featureVectorToArray(f));
    this.model = new IsolationForest({
      contamination: 0.1, // å‡è®¾10%æ˜¯å¼‚å¸¸
      nEstimators: 100
    });
    this.model.fit(featureMatrix);
  }
  
  async detect(features: FeatureVector): Promise<{
    isAnomaly: boolean;
    anomalyScore: number; // -1åˆ°1ï¼Œè¶Šæ¥è¿‘-1è¶Šå¼‚å¸¸
  }> {
    const featureArray = this.featureVectorToArray(features);
    const score = this.model.predict([featureArray])[0];
    const isAnomaly = score < -0.5; // é˜ˆå€¼å¯è°ƒ
    
    return {
      isAnomaly,
      anomalyScore: score
    };
  }
}
```

2. **é›†æˆåˆ°é£æ§æµç¨‹**
```typescript
// src/lib/policy.ts
export async function evaluatePolicyWithAI(args: {...}) {
  // ... ç°æœ‰ä»£ç  ...
  
  // å¼‚å¸¸æ£€æµ‹
  if (anomalyDetector && features) {
    const anomalyResult = await anomalyDetector.detect(features);
    
    if (anomalyResult.isAnomaly) {
      // å¼‚å¸¸æ£€æµ‹è§¦å‘ï¼Œæé«˜é£é™©åˆ†æ•°
      const anomalyRiskBoost = Math.abs(anomalyResult.anomalyScore) * 30; // æœ€å¤šå¢åŠ 30åˆ†
      aiAssessment.score = Math.min(100, aiAssessment.score + anomalyRiskBoost);
      aiAssessment.reasons.push(`å¼‚å¸¸æ£€æµ‹ï¼šå¼‚å¸¸åˆ†æ•° ${anomalyResult.anomalyScore.toFixed(2)}`);
    }
  }
  
  // ... åç»­å†³ç­–é€»è¾‘ ...
}
```

**å®æ–½ä¼˜å…ˆçº§ï¼š** ğŸ”´ **P1 - é«˜ä¼˜å…ˆçº§**

### 4.2 ä¸­æœŸä¼˜åŒ–ï¼ˆ3-6ä¸ªæœˆï¼‰

#### 4.2.1 å»ºç«‹å®Œæ•´è®­ç»ƒæµç¨‹ â­â­â­â­

**ç›®æ ‡ï¼š** å®ç°æ¨¡å‹è®­ç»ƒã€è¯„ä¼°ã€éƒ¨ç½²çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸ

**å®æ–½æ­¥éª¤ï¼š**

1. **æ•°æ®ç®¡é“**
```typescript
// src/lib/ml/data-pipeline.ts
export class DataPipeline {
  // æ”¶é›†è®­ç»ƒæ•°æ®
  async collectTrainingData(startDate: Date, endDate: Date): Promise<TrainingSample[]> {
    // ä»æ•°æ®åº“/æ—¥å¿—æ”¶é›†å†å²äº¤æ˜“æ•°æ®
    // æ ‡æ³¨ï¼šåŸºäºå®é™…ç»“æœï¼ˆæ˜¯å¦æ¬ºè¯ˆã€æ˜¯å¦è¢«æ‹’ç»ç­‰ï¼‰
  }
  
  // ç‰¹å¾å·¥ç¨‹
  async extractFeatures(samples: TrainingSample[]): Promise<FeatureMatrix> {
    // æ‰¹é‡ç‰¹å¾æå–
  }
  
  // æ•°æ®æ¸…æ´—
  async cleanData(features: FeatureMatrix): Promise<FeatureMatrix> {
    // å¤„ç†ç¼ºå¤±å€¼ã€å¼‚å¸¸å€¼
  }
}
```

2. **æ¨¡å‹è®­ç»ƒæœåŠ¡**
```python
# scripts/train_model_service.py
# å®šæœŸè®­ç»ƒè„šæœ¬ï¼ˆæ¯å‘¨/æ¯æœˆï¼‰
# 1. æ•°æ®æ”¶é›†
# 2. ç‰¹å¾å·¥ç¨‹
# 3. æ¨¡å‹è®­ç»ƒï¼ˆXGBoostã€å­¤ç«‹æ£®æ—ï¼‰
# 4. æ¨¡å‹è¯„ä¼°ï¼ˆAUCã€KSã€PSIï¼‰
# 5. æ¨¡å‹ç‰ˆæœ¬ç®¡ç†
# 6. A/Bæµ‹è¯•å‡†å¤‡
```

3. **æ¨¡å‹ç‰ˆæœ¬ç®¡ç†**
```typescript
// src/lib/ml/model-registry.ts
export interface ModelVersion {
  version: string;
  modelType: 'xgboost' | 'isolation-forest';
  metrics: {
    auc: number;
    ks: number;
    precision: number;
    recall: number;
  };
  trainedAt: Date;
  modelPath: string;
}

export class ModelRegistry {
  async registerModel(version: ModelVersion) {}
  async getLatestModel(type: string): Promise<ModelVersion> {}
  async compareModels(v1: string, v2: string): Promise<ComparisonResult> {}
}
```

**å®æ–½ä¼˜å…ˆçº§ï¼š** ğŸŸ¡ **P2 - ä¸­ä¼˜å…ˆçº§**

#### 4.2.2 å®æ—¶ç‰¹å¾è®¡ç®—æœåŠ¡ â­â­â­â­

**ç›®æ ‡ï¼š** å°†ç‰¹å¾è®¡ç®—å»¶è¿Ÿä»LLMè°ƒç”¨çš„500msé™ä½åˆ°20ms

**å®æ–½æ­¥éª¤ï¼š**

1. **ç‰¹å¾è®¡ç®—æœåŠ¡**
```typescript
// src/lib/features/feature-service.ts
export class FeatureService {
  private cache: Map<string, CachedFeatures>;
  
  async computeFeatures(
    intent: PaymentIntent,
    context: RiskContext,
    historicalData: HistoricalData
  ): Promise<FeatureVector> {
    // 1. æ£€æŸ¥ç¼“å­˜ï¼ˆæ—¶é—´çª—å£ç‰¹å¾ï¼‰
    const cached = this.cache.get(this.getCacheKey(intent, context));
    if (cached && !this.isCacheExpired(cached)) {
      return cached.features;
    }
    
    // 2. å®æ—¶è®¡ç®—
    const features = await Promise.all([
      this.computeTimeWindowFeatures(historicalData),
      this.computeBehaviorSequenceFeatures(historicalData),
      this.computeAddressAssociationFeatures(intent.recipient, historicalData),
      this.computeUserProfileFeatures(context.walletAddress, historicalData),
      this.computeOnchainFeatures(intent.recipient) // å¼‚æ­¥ï¼Œå¯ç¼“å­˜
    ]);
    
    // 3. åˆå¹¶ç‰¹å¾
    const featureVector = this.mergeFeatures(features);
    
    // 4. ç¼“å­˜
    this.cache.set(this.getCacheKey(intent, context), {
      features: featureVector,
      timestamp: Date.now()
    });
    
    return featureVector;
  }
}
```

2. **æ¨¡å‹é¢„ä¼°æœåŠ¡**
```typescript
// src/lib/ml/prediction-service.ts
export class PredictionService {
  async predict(features: FeatureVector): Promise<RiskScore> {
    // XGBoostæ¨¡å‹é¢„ä¼°ï¼ˆ20mså†…ï¼‰
    const mlScore = await this.xgboostPredictor.predict(features);
    
    // å­¤ç«‹æ£®æ—å¼‚å¸¸æ£€æµ‹ï¼ˆ10mså†…ï¼‰
    const anomalyScore = await this.anomalyDetector.detect(features);
    
    // èåˆåˆ†æ•°
    return this.combineScores(mlScore, anomalyScore);
  }
}
```

**å®æ–½ä¼˜å…ˆçº§ï¼š** ğŸŸ¡ **P2 - ä¸­ä¼˜å…ˆçº§**

#### 4.2.3 æ¨¡å‹ç›‘æ§ä¸è¯„ä¼° â­â­â­

**ç›®æ ‡ï¼š** å»ºç«‹æ¨¡å‹æ•ˆæœç›‘æ§ä½“ç³»

**å®æ–½æ­¥éª¤ï¼š**

1. **ç›‘æ§æŒ‡æ ‡è®¡ç®—**
```typescript
// src/lib/ml/metrics.ts
export class ModelMetrics {
  // PSIï¼ˆç¾¤ä½“ç¨³å®šåº¦ï¼‰
  async calculatePSI(
    currentDistribution: number[],
    baselineDistribution: number[]
  ): Promise<number> {
    // PSIè®¡ç®—
  }
  
  // KSå€¼
  async calculateKS(
    scores: number[],
    labels: number[]
  ): Promise<number> {
    // KSè®¡ç®—
  }
  
  // AUC
  async calculateAUC(
    scores: number[],
    labels: number[]
  ): Promise<number> {
    // AUCè®¡ç®—
  }
}
```

2. **ç›‘æ§æœåŠ¡**
```typescript
// src/lib/ml/monitoring.ts
export class ModelMonitoring {
  async monitorModelPerformance(modelVersion: string) {
    // æ¯æ—¥/æ¯å‘¨è®¡ç®—PSIã€KSã€AUC
    // æ£€æµ‹æ¨¡å‹æ¼‚ç§»
    // è§¦å‘å‘Šè­¦
  }
  
  async detectModelDrift(): Promise<boolean> {
    // PSI > 0.25 è¡¨ç¤ºæ˜¾è‘—æ¼‚ç§»
    // è§¦å‘æ¨¡å‹é‡è®­ç»ƒ
  }
}
```

**å®æ–½ä¼˜å…ˆçº§ï¼š** ğŸŸ¡ **P2 - ä¸­ä¼˜å…ˆçº§**

### 4.3 é•¿æœŸä¼˜åŒ–ï¼ˆ6-12ä¸ªæœˆï¼‰

#### 4.3.1 A/Bæµ‹è¯•æ¡†æ¶ â­â­â­

**ç›®æ ‡ï¼š** æ”¯æŒå¤šæ¨¡å‹ç‰ˆæœ¬å¯¹æ¯”æµ‹è¯•

**å®æ–½æ­¥éª¤ï¼š**

1. **A/Bæµ‹è¯•æœåŠ¡**
```typescript
// src/lib/ml/ab-testing.ts
export class ABTestingService {
  async assignVariant(userId: string): Promise<'A' | 'B'> {
    // åŸºäºç”¨æˆ·IDå“ˆå¸Œåˆ†é…
  }
  
  async trackResult(
    variant: 'A' | 'B',
    features: FeatureVector,
    prediction: RiskScore,
    actualOutcome: 'approved' | 'rejected' | 'fraud'
  ) {
    // è®°å½•A/Bæµ‹è¯•ç»“æœ
  }
  
  async analyzeResults(): Promise<ABTestResult> {
    // å¯¹æ¯”A/Bç‰ˆæœ¬æ•ˆæœ
  }
}
```

**å®æ–½ä¼˜å…ˆçº§ï¼š** ğŸŸ¢ **P3 - ä½ä¼˜å…ˆçº§**

#### 4.3.2 åœ¨çº¿å­¦ä¹  â­â­â­

**ç›®æ ‡ï¼š** æ¨¡å‹è‡ªåŠ¨å¢é‡æ›´æ–°

**å®æ–½æ­¥éª¤ï¼š**

1. **åœ¨çº¿å­¦ä¹ æœåŠ¡**
```typescript
// src/lib/ml/online-learning.ts
export class OnlineLearningService {
  async updateModel(
    newSamples: TrainingSample[],
    currentModel: ModelVersion
  ): Promise<ModelVersion> {
    // å¢é‡è®­ç»ƒ
    // è¯„ä¼°æ–°æ¨¡å‹
    // å¦‚æœæ•ˆæœæ›´å¥½ï¼Œæ›¿æ¢å½“å‰æ¨¡å‹
  }
}
```

**å®æ–½ä¼˜å…ˆçº§ï¼š** ğŸŸ¢ **P3 - ä½ä¼˜å…ˆçº§**

---

## æŠ€æœ¯æ¶æ„è®¾è®¡

### 5.1 æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   å‰ç«¯ (Frontend)                        â”‚
â”‚  - è‡ªç„¶è¯­è¨€è¾“å…¥                                         â”‚
â”‚  - æ”¯ä»˜è¯·æ±‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               API Gateway (server.ts)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â†“                               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   è§„åˆ™å¼•æ“        â”‚          â”‚   ç‰¹å¾æœåŠ¡        â”‚
â”‚  - ç™½åå•æ£€æŸ¥    â”‚          â”‚  - æ—¶é—´çª—å£ç‰¹å¾   â”‚
â”‚  - é‡‘é¢é™åˆ¶      â”‚          â”‚  - è¡Œä¸ºåºåˆ—ç‰¹å¾   â”‚
â”‚  - é“¾ä¸ŠçŠ¶æ€      â”‚          â”‚  - åœ°å€å…³è”ç‰¹å¾   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚  - ç”¨æˆ·ç”»åƒç‰¹å¾   â”‚
        â†“                     â”‚  - é“¾ä¸Šç‰¹å¾       â”‚
        â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                               â†“
        â”‚                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                     â”‚   æ¨¡å‹é¢„ä¼°æœåŠ¡    â”‚
        â”‚                     â”‚  - XGBoost        â”‚
        â”‚                     â”‚  - å­¤ç«‹æ£®æ—       â”‚
        â”‚                     â”‚  - LLM (å¯é€‰)     â”‚
        â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                               â†“
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚        å†³ç­–èåˆæœåŠ¡            â”‚
        â”‚  - è§„åˆ™ç»“æœ                   â”‚
        â”‚  - MLæ¨¡å‹åˆ†æ•°                 â”‚
        â”‚  - å¼‚å¸¸æ£€æµ‹ç»“æœ               â”‚
        â”‚  - LLMè¯„ä¼°ï¼ˆå¯é€‰ï¼‰            â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚        æœ€ç»ˆå†³ç­–è¾“å‡º            â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 æ•°æ®æµ

```
æ”¯ä»˜è¯·æ±‚
    â†“
[1] è§„åˆ™å¼•æ“æ£€æŸ¥ï¼ˆå¿«é€Ÿæ‹’ç»ï¼‰
    â”œâ”€ ç™½åå• â†’ é€šè¿‡
    â”œâ”€ é‡‘é¢é™åˆ¶ â†’ æ‹’ç»
    â””â”€ é“¾ä¸Šå†»ç»“ â†’ æ‹’ç»
    â†“ (é€šè¿‡)
[2] ç‰¹å¾å·¥ç¨‹ï¼ˆ20msï¼‰
    â”œâ”€ å®æ—¶ç‰¹å¾è®¡ç®—
    â”œâ”€ ç¼“å­˜æŸ¥è¯¢
    â””â”€ ç‰¹å¾å‘é‡ç”Ÿæˆ
    â†“
[3] æ¨¡å‹é¢„ä¼°ï¼ˆ20msï¼‰
    â”œâ”€ XGBoost â†’ é£é™©åˆ†æ•°
    â”œâ”€ å­¤ç«‹æ£®æ— â†’ å¼‚å¸¸åˆ†æ•°
    â””â”€ LLMï¼ˆå¯é€‰ï¼‰â†’ æ–‡æœ¬è¯„ä¼°
    â†“
[4] å†³ç­–èåˆ
    â”œâ”€ åˆ†æ•°åŠ æƒèåˆ
    â””â”€ é˜ˆå€¼åˆ¤æ–­
    â†“
[5] æœ€ç»ˆå†³ç­–
    â”œâ”€ é€šè¿‡ â†’ æ‰§è¡Œæ”¯ä»˜
    â””â”€ æ‹’ç» â†’ è¿”å›åŸå› 
```

### 5.3 æŠ€æœ¯æ ˆå»ºè®®

**åç«¯ï¼š**
- **Node.js/TypeScript** - ç°æœ‰æŠ€æœ¯æ ˆï¼Œä¿æŒä¸å˜
- **Python** - æ¨¡å‹è®­ç»ƒè„šæœ¬ï¼ˆXGBoostã€å­¤ç«‹æ£®æ—ï¼‰
- **Redis** - ç‰¹å¾ç¼“å­˜ã€æ¨¡å‹ç¼“å­˜
- **PostgreSQL** - è®­ç»ƒæ•°æ®å­˜å‚¨ã€å†å²äº¤æ˜“æ•°æ®

**æœºå™¨å­¦ä¹ ï¼š**
- **XGBoost** - ä¸»è¦é£é™©è¯„ä¼°æ¨¡å‹
- **scikit-learn** - å­¤ç«‹æ£®æ—ã€ç‰¹å¾å·¥ç¨‹å·¥å…·
- **ml-xgboost** (Node.js) æˆ– **Pythonå­è¿›ç¨‹** - æ¨¡å‹æ¨ç†
- **Pandas/NumPy** - æ•°æ®å¤„ç†

**ç›‘æ§ï¼š**
- **Prometheus** - æŒ‡æ ‡æ”¶é›†
- **Grafana** - å¯è§†åŒ–
- **è‡ªå®šä¹‰ç›‘æ§æœåŠ¡** - PSIã€KSã€AUCè®¡ç®—

---

## å®æ–½ä¼˜å…ˆçº§

### ä¼˜å…ˆçº§P0ï¼ˆç«‹å³å®æ–½ï¼Œ1-2ä¸ªæœˆï¼‰

1. âœ… **å¢å¼ºç‰¹å¾å·¥ç¨‹** - ä»5ç»´æ‰©å±•åˆ°50+ç»´
2. âœ… **å¼•å…¥XGBoostæ¨¡å‹** - è®­ç»ƒå’Œéƒ¨ç½²é£é™©è¯„ä¼°æ¨¡å‹
3. âœ… **å¼•å…¥å­¤ç«‹æ£®æ—** - å¼‚å¸¸æ£€æµ‹æ¨¡å‹

**é¢„æœŸæ•ˆæœï¼š**
- é£é™©è¯„ä¼°å‡†ç¡®ç‡æå‡ï¼ˆç›®æ ‡ï¼šAUC > 0.85ï¼‰
- è¯„ä¼°å»¶è¿Ÿé™ä½ï¼ˆç›®æ ‡ï¼š<50msï¼‰
- å¯è§£é‡Šæ€§æå‡ï¼ˆç‰¹å¾é‡è¦æ€§ï¼‰

### ä¼˜å…ˆçº§P1ï¼ˆé«˜ä¼˜å…ˆçº§ï¼Œ2-3ä¸ªæœˆï¼‰

4. âœ… **å»ºç«‹è®­ç»ƒæµç¨‹** - æ•°æ®æ”¶é›†ã€è®­ç»ƒã€è¯„ä¼°ã€éƒ¨ç½²
5. âœ… **å®æ—¶ç‰¹å¾æœåŠ¡** - ç‰¹å¾è®¡ç®—ä¼˜åŒ–å’Œç¼“å­˜
6. âœ… **æ¨¡å‹ç›‘æ§** - PSIã€KSã€AUCç›‘æ§

**é¢„æœŸæ•ˆæœï¼š**
- æ¨¡å‹è¿­ä»£èƒ½åŠ›
- æ¨¡å‹ç¨³å®šæ€§ç›‘æ§
- è‡ªåŠ¨æ£€æµ‹æ¨¡å‹æ¼‚ç§»

### ä¼˜å…ˆçº§P2ï¼ˆä¸­ä¼˜å…ˆçº§ï¼Œ3-6ä¸ªæœˆï¼‰

7. âœ… **A/Bæµ‹è¯•æ¡†æ¶** - å¤šæ¨¡å‹ç‰ˆæœ¬å¯¹æ¯”
8. âœ… **åœ¨çº¿å­¦ä¹ ** - å¢é‡æ¨¡å‹æ›´æ–°

**é¢„æœŸæ•ˆæœï¼š**
- æ¨¡å‹æŒç»­ä¼˜åŒ–
- æ•°æ®é©±åŠ¨çš„æ¨¡å‹è¿­ä»£

---

## æ€»ç»“

### å½“å‰çŠ¶æ€
- âœ… åŸºç¡€LLMé£é™©è¯„ä¼°å·²å®ç°
- âš ï¸ ç¼ºä¹ä¼ ç»Ÿæœºå™¨å­¦ä¹ æ¨¡å‹
- âš ï¸ ç‰¹å¾å·¥ç¨‹ä¸è¶³
- âš ï¸ å®æ—¶æ€§æœ‰å¾…æå‡

### ä¼˜åŒ–æ–¹å‘
1. **çŸ­æœŸï¼ˆ1-2ä¸ªæœˆï¼‰**ï¼šç‰¹å¾å·¥ç¨‹ + XGBoost + å­¤ç«‹æ£®æ—
2. **ä¸­æœŸï¼ˆ3-6ä¸ªæœˆï¼‰**ï¼šè®­ç»ƒæµç¨‹ + å®æ—¶æœåŠ¡ + ç›‘æ§
3. **é•¿æœŸï¼ˆ6-12ä¸ªæœˆï¼‰**ï¼šA/Bæµ‹è¯• + åœ¨çº¿å­¦ä¹ 

### é¢„æœŸæ”¶ç›Š
- **å‡†ç¡®ç‡**ï¼šAUCä»æœªçŸ¥æå‡åˆ° >0.85
- **å»¶è¿Ÿ**ï¼šä»500ms-2sé™ä½åˆ° <50msï¼ˆ10-40å€æå‡ï¼‰
- **å¯è§£é‡Šæ€§**ï¼šä»LLMæ–‡æœ¬è§£é‡Šåˆ°ç‰¹å¾é‡è¦æ€§åˆ†æ
- **æˆæœ¬**ï¼šä»LLM APIè°ƒç”¨é™ä½åˆ°æ¨¡å‹æ¨ç†ï¼ˆæ˜¾è‘—é™ä½ï¼‰

---

## å‚è€ƒèµ„æ–™

1. æ”¯ä»˜å®ç¬¬äº”ä»£é£æ§å¼•æ“AlphaRiskæ¨¡å‹è§£æ
2. AIèµ‹èƒ½é‡‘èé£æ§ï¼šåŸºäºæœºå™¨å­¦ä¹ çš„æ™ºèƒ½æ¬ºè¯ˆæ£€æµ‹ç³»ç»Ÿå®æˆ˜æ•™ç¨‹
3. SMOTE-XGBoostå®æˆ˜ï¼šé‡‘èé£æ§ä¸­æ¬ºè¯ˆæ£€æµ‹çš„æ ·æœ¬ä¸å¹³è¡¡è§£å†³æ–¹æ¡ˆ
4. é£æ§å»ºæ¨¡æ•´ä½“æµç¨‹
5. å…´ä¸šé“¶è¡Œé£æ§å†³ç­–ä¸€ä½“åŒ–å¹³å°å®è·µ

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2026-01-31  
**ç»´æŠ¤è€…**: ç®—æ³•å·¥ç¨‹å¸ˆå›¢é˜Ÿ
