# Network (Kite Testnet defaults)
RPC_URL=https://rpc-testnet.gokite.ai/
CHAIN_ID=2368

# Signer (Agent wallet — this wallet pays and is used for AI risk balance check)
# IMPORTANT: use a testnet key only. 64 hex chars, 0x prefix optional.
# AI 风控中的「钱包余额」= 此地址的 SETTLEMENT_TOKEN 余额，不是前端连接的钱包。请为此地址充值结算代币。
# 若使用 Chainlink env-enc 将私钥存在 .env.enc：npx env-enc set-pw → npx env-enc set，然后 npx tsx src/server.ts
PRIVATE_KEY=0xYOUR_TESTNET_PRIVATE_KEY

# Stablecoin token (Kite testnet settlement token / stablecoin)
# AI risk check reads this token balance of PRIVATE_KEY wallet. Fund that wallet with this token.
# Find from Kite docs, then paste here.
SETTLEMENT_TOKEN_ADDRESS=0xTODO_TOKEN_ADDRESS

# 收款地址。与 AA 来回转账：
# - 往 AA 充测试币：RECIPIENT 和 ALLOWLIST 都设为你的 AA 账户地址，PAYMENT_MODE=eoa，跑 demo:pay
# - 从 AA 转回 EOA：RECIPIENT 设为你的 Owner EOA 地址，ALLOWLIST 含该 EOA，PAYMENT_MODE=aa，跑 demo:pay
RECIPIENT=0xTODO_RECIPIENT_ADDRESS
# Demo transfer（默认 0.001 便于测试网小额验证）
AMOUNT=0.001

# Policy
# ALLOWLIST 支持逗号、换行、空格分隔；换行时用双引号包裹。与 AA 来回转账见上方 RECIPIENT 注释。
ALLOWLIST=0xTODO_RECIPIENT_ADDRESS
# 多地址换行示例（双引号内）：
# ALLOWLIST="0xaddr1,
# 0xaddr2,
# 0xaddr3"
MAX_AMOUNT=1
DAILY_LIMIT=5

# --- 小额测试推荐（如仅 1 USDT + 0.3 KITE）---
# 前端/API 干跑可覆盖大部分风控；真实发链仅 1～2 笔验证日限额即可。
# AMOUNT=0.001
# MAX_AMOUNT=0.1
# DAILY_LIMIT=0.002
# ALLOWLIST= 只填 1～2 个白名单地址，便于触发 NOT_IN_ALLOWLIST
# EXECUTE_ONCHAIN=0  默认干跑；需验证日限额时再改为 1 发 1～2 笔

# Safety: set to 1 to actually send tx onchain
EXECUTE_ONCHAIN=0
# EXECUTE_ONCHAIN=1

# Payment mode（与 AA 来回转账）：
# - eoa: 用 PRIVATE_KEY 直接 ERC-20 转账；往 AA 充测试币时用 eoa，RECIPIENT 填 AA 地址
# - aa:  用 gokite-aa-sdk 发 UserOperation；从 AA 转回 EOA 时用 aa，RECIPIENT 填你的 EOA 地址
PAYMENT_MODE=eoa
# PAYMENT_MODE=aa
# BUNDLER_URL is required when PAYMENT_MODE=aa
# BUNDLER_URL=https://bundler-service.staging.gokite.ai/rpc/
# Optional: PAYMASTER_ADDRESS=0x...

# Optional: store local spend state here
STATE_PATH=.agentpayguard/state.json

# API server（供前端 /pay 调用，默认 3456）
# API_PORT=3456
# CORS_ORIGIN=*   # 或前端地址，如 http://localhost:8080

# --- Chainlink env-enc（可选）：用 .env.enc 加密存储敏感项 ---
# 1. 本会话设置密码: npx env-enc set-pw
# 2. 写入变量: npx env-enc set（可填 PRIVATE_KEY 等，与 .env 同名变量会被 .env.enc 覆盖）
# 3. 启动前在同一终端已 set-pw 时，会优先使用 .env.enc 解密后的变量
# 4. 查看/删除: npx env-enc view | npx env-enc remove VAR_NAME | npx env-enc remove-all

# Optional: probe Kite AA SDK (prints detected exports)
PROBE_KITE_AA=0

# AI Agent Integration (optional)
# Set any API key to enable AI intent parsing (priority: DeepSeek > Gemini > OpenAI > Claude)
# DeepSeek (免费额度推荐): https://platform.deepseek.com/
# DEEPSEEK_API_KEY=your-deepseek-api-key-here
# AI_MODEL=deepseek-chat

# Google Gemini (免费额度): https://makersuite.google.com/app/apikey
# GEMINI_API_KEY=your-gemini-api-key-here
# AI_MODEL=gemini-1.5-pro

# OpenAI (付费): https://platform.openai.com/api-keys
# OPENAI_API_KEY=sk-your-openai-api-key-here
# AI_MODEL=gpt-4o-mini (or gpt-4-turbo, gpt-4o)

# Claude (付费): https://console.anthropic.com/settings/keys
# CLAUDE_API_KEY=your-claude-api-key-here
# AI_MODEL=claude-3-haiku

# Local AI (免费): Ollama, LM Studio, etc.
# OLLAMA_URL=http://localhost:11434/v1
# LMSTUDIO_URL=http://localhost:1234/v1
# LOCAL_AI_URL=http://localhost:8080/v1
# AI_MODEL=llama3.2 (for Ollama)

# Enable AI intent parsing (set to 1 to enable)
# ENABLE_AI_INTENT=1

# ML Features (机器学习特征，冷启动策略)
# ENABLE_ML_FEATURES=1  # 启用ML特征工程和异常检测（边用边收集数据）
# ML_DATA_PATH=./data/training  # ML数据存储路径（默认：./data/training）

# Kite Agent Identity (KitePass / Agent Passport) - 满足规则要求：使用 Kite Agent 或身份体系
# KITE_API_KEY=api_key_xxx  # KitePass API Key（从 https://app.gokite.ai/ 获取，推荐）
# KITE_AGENT_NAME=AgentPayGuard  # Agent 名称（默认：AgentPayGuard）
# 注意：如果不设置 KITE_API_KEY，将使用 PRIVATE_KEY 对应的 EOA 地址作为 Agent 身份标识

# AI 风控阈值（可选；不设则用默认 maxRiskScore=70, autoRejectRiskLevels=high）
# AI_MAX_RISK_SCORE=70
# AI_AUTO_REJECT_LEVELS=high
# AI_AUTO_REJECT_LEVELS=high,medium

eoa_tx_hash=0x8ec4f4a44fb7ef878db9fc549ff81294982224648f3cc21ecad04764dcbd75db
eoa_tx_url=https://testnet.kitescan.ai/tx/0x8ec4f4a44fb7ef878db9fc549ff81294982224648f3cc21ecad04764dcbd75db
aa_tx_hash=0x3a58b19983db34e34eb95d9514bf860b3f03e15837c91844729013395b261313
aa_tx_url=https://testnet.kitescan.ai/tx/0x3a58b19983db34e34eb95d9514bf860b3f03e15837c91844729013395b261313
aa_user_op_hash=0x423936cb87ad9946e28f5d06d8ff736735ca7bb43ed7861a8f632919157afce3

ai_pay_intent_example="Send 0.00001 USDT to 0xA7721cCcbD5CAf2F8555aDe641C4Fd687c9a8B52 for gift."