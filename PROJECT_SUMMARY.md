# AgentPayGuard é¡¹ç›®æ€»ç»“

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

**AgentPayGuard** æ˜¯ä¸€ä¸ªé¢å‘ AI Agent çš„é“¾ä¸Šæ”¯ä»˜æƒé™ä¸é£æ§ç³»ç»Ÿï¼Œä¸º Kite Payment Track é»‘å®¢æ¾å¼€å‘ã€‚é¡¹ç›®è®© AI Agent åœ¨æ‰§è¡Œé“¾ä¸Šç¨³å®šå¸æ”¯ä»˜æ—¶ï¼Œå…·å¤‡**å¯éªŒè¯èº«ä»½ã€å¯ç¼–ç¨‹æƒé™ã€å¯å®¡è®¡è®°å½•ã€å¯é˜»æ–­å¼‚å¸¸**çš„æœ€å°é—­ç¯ã€‚

### æ ¸å¿ƒç‰¹æ€§
- ğŸ¤– **AI Agent æ ¸å¿ƒ**ï¼šæ”¯æŒè‡ªç„¶è¯­è¨€æ”¯ä»˜è¯·æ±‚è§£æå’Œæ™ºèƒ½é£é™©è¯„ä¼°
- ğŸ”’ **å¤šå±‚å®‰å…¨é˜²æŠ¤**ï¼šä¼ ç»Ÿè§„åˆ™ï¼ˆç™½åå•/é™é¢ï¼‰ + AIé£é™©è¯„ä¼° + é“¾ä¸Šå†»ç»“æ£€æŸ¥
- ğŸš€ **ç«¯åˆ°ç«¯å·¥ä½œæµ**ï¼šä»è‡ªç„¶è¯­è¨€è¯·æ±‚åˆ°é“¾ä¸Šæ‰§è¡Œçš„å®Œæ•´é—­ç¯
- ğŸ“Š **å¯éªŒè¯çš„AIå†³ç­–**ï¼šAIé£é™©è¯„ä¼°é€æ˜å¯è§£é‡Šï¼Œæä¾›é£é™©ç†ç”±å’Œå»ºè®®
- ğŸ”„ **ä¼˜é›…é™çº§**ï¼šæ— AI APIæ—¶è‡ªåŠ¨ä½¿ç”¨å›é€€è§£æå™¨ï¼Œä¿è¯ç³»ç»Ÿå¯ç”¨æ€§

---

## ğŸ¯ é¡¹ç›®è§£å†³çš„é—®é¢˜

AI Agent ä¸€æ—¦å¼€å§‹"çœŸèŠ±é’±"ï¼Œç³»ç»Ÿç«‹åˆ»å‡ºç°ä¸‰ä¸ªç°å®é—®é¢˜ï¼š

1. **è°åœ¨èŠ±é’±**ï¼šæœåŠ¡æ–¹ä¸ç”¨æˆ·éœ€è¦èƒ½éªŒè¯"è¿™æ˜¯å“ªä¸ª Agentã€ä»£è¡¨è°ã€åœ¨ä»€ä¹ˆæˆæƒä¸‹"å‘èµ·æ”¯ä»˜
2. **èƒ½ä¸èƒ½åœå¾—ä½**ï¼šAgent è¢«æç¤ºæ³¨å…¥ã€ç§é’¥/ä¼šè¯æ³„éœ²ã€è¡Œä¸ºå¼‚å¸¸æ—¶ï¼Œéœ€è¦åœ¨æ”¯ä»˜æ‰§è¡Œå‰æˆ–æ‰§è¡Œè¾¹ç•Œä¸Šè¢«å¼ºåˆ¶æ‹¦æˆª
3. **äº‹åèƒ½ä¸èƒ½è¯´æ¸…**ï¼šéœ€è¦å¯è¿½æº¯çš„å®¡è®¡é“¾è·¯ï¼Œå›ç­”"è¿™ç¬”é’±ä¸ºä»€ä¹ˆä»˜ã€ä»˜ç»™è°ã€è°æ‰¹å‡†ã€è§„åˆ™æ˜¯å¦è¢«éµå®ˆ"

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### ç³»ç»Ÿæ¶æ„å›¾
```
User(æˆæƒ/é…ç½®ç­–ç•¥)
  â””â”€ Agentï¼ˆKite èº«ä»½ï¼šAgent/Passportï¼‰
       â””â”€ AI Intent Parserï¼ˆè‡ªç„¶è¯­è¨€è§£æ + é£é™©è¯„ä¼°ï¼‰
            â””â”€ AA æ™ºèƒ½è´¦æˆ·ï¼ˆKite AA SDKï¼‰
                 â””â”€ Policy Guardï¼ˆç™½åå•/é™é¢/æœ‰æ•ˆæœŸ + AIé£é™©è¯„ä¼°â€¦ï¼‰
                      â””â”€ Stablecoin Paymentï¼ˆé“¾ä¸Šè½¬è´¦ï¼‰
                           â””â”€ Audit Trailï¼ˆé“¾ä¸Šå¯æŸ¥ + å¯é€‰æœ¬åœ°æ—¥å¿—ï¼‰

å¼‚å¸¸/é«˜é£é™© â†’ SimpleMultiSigï¼ˆè‡ªç ” 2/3 å¤šç­¾ï¼‰ä»‹å…¥ï¼šå†»ç»“/è§£å†»/ç­–ç•¥æ›´æ–°
  - å¤šç­¾åœ°å€: 0xA247e042cAE22F0CDab2a197d4c194AfC26CeECA
  - å†»ç»“åˆçº¦: 0x3168a2307a3c272ea6CE2ab0EF1733CA493aa719
  - å†»ç»“æ“ä½œ Tx: https://testnet.kitescan.ai/tx/0xab40fc72ea1fa30a6455b48372a02d25e67952ab7c69358266f4d83413bfa46c
```

### æ ¸å¿ƒæ¨¡å—

| æ¨¡å— | æ–‡ä»¶ | åŠŸèƒ½ |
|------|------|------|
| **AI æ„å›¾è§£æ** | [`src/lib/ai-intent.ts`](src/lib/ai-intent.ts) | è‡ªç„¶è¯­è¨€è§£æã€é£é™©è¯„ä¼°ã€å¤šAIæä¾›å•†æ”¯æŒ |
| **ç­–ç•¥å¼•æ“** | [`src/lib/policy.ts`](src/lib/policy.ts) | ç™½åå•/é™é¢/AIé£é™©è¯„ä¼°/é“¾ä¸Šå†»ç»“æ£€æŸ¥ |
| **æ”¯ä»˜æ‰§è¡Œ** | [`src/lib/run-pay.ts`](src/lib/run-pay.ts) | EOA/AA æ”¯ä»˜è·¯å¾„ç»Ÿä¸€æ¥å£ |
| **ERC20 è½¬è´¦** | [`src/lib/erc20.ts`](src/lib/erc20.ts) | EOA ç›´æ¥è½¬è´¦ |
| **AA æ”¯ä»˜** | [`src/lib/kite-aa.ts`](src/lib/kite-aa.ts) | Kite AA SDK é›†æˆ |
| **é…ç½®ç®¡ç†** | [`src/lib/config.ts`](src/lib/config.ts) | ç¯å¢ƒå˜é‡åŠ è½½ä¸éªŒè¯ |
| **çŠ¶æ€ç®¡ç†** | [`src/lib/state.ts`](src/lib/state.ts) | æœ¬åœ°æ”¯ä»˜è®°å½•ä¸é™é¢è¿½è¸ª |
| **API æœåŠ¡** | [`src/server.ts`](src/server.ts) | HTTP APIï¼ˆä¾›å‰ç«¯è°ƒç”¨ï¼‰ |

---

## ğŸš€ æ¼”ç¤ºæ–¹æ³•

### ç¯å¢ƒè¦æ±‚
- Node.js >= 18ï¼ˆå»ºè®® 20+ï¼‰
- pnpm
- Kite æµ‹è¯•ç½‘ RPC ä¸æµ‹è¯•å¸
- ï¼ˆå¯é€‰ï¼‰OpenAI/DeepSeek/Gemini API Keyï¼ˆç”¨äºAIåŠŸèƒ½ï¼‰

### å¿«é€Ÿå¼€å§‹

#### 1. å®‰è£…ä¾èµ–
```bash
pnpm i
```

#### 2. é…ç½®ç¯å¢ƒå˜é‡
å¤åˆ¶ [`.env.example`](.env.example) ä¸º `.env`ï¼Œå¡«å†™å…³é”®é…ç½®ï¼š

```bash
# ç½‘ç»œé…ç½®
RPC_URL=https://rpc-testnet.gokite.ai/
CHAIN_ID=2368

# ç§é’¥ï¼ˆä»…æµ‹è¯•ç½‘ï¼‰
PRIVATE_KEY=0xYOUR_TESTNET_PRIVATE_KEY

# ç¨³å®šå¸åˆçº¦åœ°å€
SETTLEMENT_TOKEN_ADDRESS=0xTODO_TOKEN_ADDRESS

# æ”¶æ¬¾åœ°å€
RECIPIENT=0xTODO_RECIPIENT_ADDRESS
AMOUNT=0.001

# ç­–ç•¥é…ç½®
ALLOWLIST=0xTODO_RECIPIENT_ADDRESS
MAX_AMOUNT=1
DAILY_LIMIT=5

# å®‰å…¨å¼€å…³ï¼ˆè®¾ä¸º1æ‰ä¼šçœŸå®å‘é€äº¤æ˜“ï¼‰
EXECUTE_ONCHAIN=0

# æ”¯ä»˜æ¨¡å¼ï¼ˆeoa æˆ– aaï¼‰
PAYMENT_MODE=eoa

# AI é…ç½®ï¼ˆå¯é€‰ï¼‰
ENABLE_AI_INTENT=1
DEEPSEEK_API_KEY=your-deepseek-api-key-here
```

#### 3. è¿è¡Œæ¼”ç¤ºè„šæœ¬

##### Demo Aï¼šAI Agent è‡ªç„¶è¯­è¨€æ”¯ä»˜
```bash
# ä½¿ç”¨è‡ªç„¶è¯­è¨€æŒ‡ä»¤æ‰§è¡Œæ”¯ä»˜
pnpm demo:ai-agent "Pay 50 USDC to 0xd2d45ef2f2ddaffc8c8bc03cedc4f55fb9e97e2b for server hosting"

# å¦‚æœæ²¡æœ‰é…ç½®AI API Keyï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ä½¿ç”¨å›é€€è§£æå™¨
```

**é¢„æœŸè¾“å‡º**ï¼š
- AI è§£ææ”¯ä»˜æ„å›¾ï¼ˆæ”¶æ¬¾åœ°å€ã€é‡‘é¢ã€å¸ç§ã€ç›®çš„ï¼‰
- AI é£é™©è¯„ä¼°ï¼ˆåˆ†æ•°ã€ç­‰çº§ã€ç†ç”±ã€å»ºè®®ï¼‰
- ç­–ç•¥æ£€æŸ¥ï¼ˆç™½åå•ã€é™é¢ã€AIé£é™©é˜ˆå€¼ï¼‰
- é“¾ä¸Šæ‰§è¡Œç»“æœï¼ˆdry-run æˆ–çœŸå®äº¤æ˜“ï¼‰

##### Demo Bï¼šæ­£å¸¸æ”¯ä»˜ï¼ˆè¯æ˜"èƒ½ä»˜é’±"ï¼‰
```bash
pnpm demo:pay
```

**é¢„æœŸè¾“å‡º**ï¼š
- ç­–ç•¥æ£€æŸ¥é€šè¿‡
- é“¾ä¸Šäº¤æ˜“æˆåŠŸï¼ˆdry-run æ¨¡å¼ä¸‹æ˜¾ç¤ºæ¨¡æ‹Ÿç»“æœï¼‰
- è¾“å‡º tx hashï¼ˆè®¾ç½® `EXECUTE_ONCHAIN=1` åï¼‰

##### Demo Cï¼šå¼‚å¸¸æ”¯ä»˜è¢«é˜»æ–­ï¼ˆè¯æ˜"èƒ½æ‹¦ä½"ï¼‰
```bash
pnpm demo:reject
```

**é¢„æœŸè¾“å‡º**ï¼š
- ç­–ç•¥æ£€æŸ¥å¤±è´¥ï¼ˆéç™½åå•åœ°å€æˆ–è¶…è¿‡é™é¢ï¼‰
- æ”¯ä»˜è¢«æ‹’ç»ï¼Œæ˜¾ç¤ºæ‹’ç»åŸå› 

##### Demo Dï¼šéªŒè¯é“¾ä¸Šå†»ç»“é£æ§
```bash
pnpm demo:freeze
```

**é¢„æœŸè¾“å‡º**ï¼š
- æ£€æŸ¥å¤šç­¾å†»ç»“çŠ¶æ€
- éªŒè¯å†»ç»“æœºåˆ¶æ˜¯å¦ç”Ÿæ•ˆ

#### 4. çœŸå®é“¾ä¸Šäº¤æ˜“
è®¾ç½® `.env` ä¸­ `EXECUTE_ONCHAIN=1`ï¼Œç„¶åé‡æ–°è¿è¡Œï¼š

```bash
pnpm demo:pay
# æˆ–ä½¿ç”¨AI Agent
pnpm demo:ai-agent "Pay 10 USDC to 0xd2d45ef2f2ddaffc8c8bc03cedc4f55fb9e97e2b"
```

**æ³¨æ„**ï¼šçœŸå®å‘é€å‰ç¡®ä¿é’±åŒ…æœ‰è¶³å¤Ÿæµ‹è¯•èµ„äº§ï¼š
- **KITEï¼ˆåŸç”Ÿä»£å¸ï¼‰**ï¼šæ”¯ä»˜ gasï¼Œæ¯ç¬”çº¦ 0.01ï½0.05 KITE
- **USDT/USDCï¼ˆç¨³å®šå¸ï¼‰**ï¼šå®é™…è½¬å‡ºé‡‘é¢

### å‰ç«¯ + API è”è°ƒ

#### 1. å¯åŠ¨ API æœåŠ¡
```bash
# æ–¹å¼ 1ï¼šä½¿ç”¨ pnpm
pnpm server

# æ–¹å¼ 2ï¼šç›´æ¥è¿è¡Œï¼ˆæ¨èï¼Œå¯ä»¥çœ‹åˆ°å®æ—¶è¾“å‡ºï¼‰
API_PORT=3456 npx tsx src/server.ts
```

é»˜è®¤ç›‘å¬ `http://localhost:3456`ï¼Œæä¾›ä»¥ä¸‹æ¥å£ï¼š
- `GET /api/health` - å¥åº·æ£€æŸ¥
- `GET /api/policy` - ç­–ç•¥é…ç½®
- `POST /api/pay` - å‘èµ·æ”¯ä»˜
- `POST /api/ai-pay` - AI è‡ªç„¶è¯­è¨€æ”¯ä»˜

#### 2. å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨
```bash
cd frontend && npm i && npm run dev
```

å¼€å‘ç¯å¢ƒä¸‹ `/api` ä¼šä»£ç†åˆ°ä¸»ä»“ APIï¼ˆ3456ï¼‰ï¼Œæ‰“å¼€é¦–é¡µ â†’ **PAY**ï¼Œå¡«å†™æ”¶æ¬¾åœ°å€ã€é‡‘é¢ï¼Œé€‰æ‹© EOA/AAï¼Œå‹¾é€‰ã€ŒçœŸå®å‘é“¾ä¸Šäº¤æ˜“ã€åæäº¤å³å¯ã€‚

---

## ğŸ”’ AI å¢å¼ºç­–ç•¥

### æœ€å°ç­–ç•¥é›†

- **æ”¶æ¬¾åœ°å€ç™½åå•**ï¼šåªå…è®¸æ”¯ä»˜ç»™é¢„å…ˆç™»è®°çš„ä¾›åº”å•†/åˆçº¦åœ°å€
- **å•ç¬”ä¸Šé™**ï¼šæ¯ç¬”æœ€å¤šæ”¯ä»˜ `MAX_AMOUNT`
- **å‘¨æœŸé™é¢ï¼ˆå¯é€‰ï¼‰**ï¼šæ¯æ—¥æ€»é¢ä¸è¶…è¿‡ `DAILY_LIMIT`
- **æˆæƒæœ‰æ•ˆæœŸï¼ˆå¯é€‰ï¼‰**ï¼šè¶…è¿‡æœ‰æ•ˆæœŸçš„æ”¯ä»˜è¯·æ±‚è‡ªåŠ¨å¤±æ•ˆ
- **AIé£é™©è¯„ä¼°**ï¼šåŸºäºæ”¯ä»˜ç›®çš„ã€é‡‘é¢ã€å†å²æ¨¡å¼çš„é£é™©è¯„åˆ†ï¼ˆ0-100ï¼‰
- **AIé£é™©é˜ˆå€¼**ï¼šå¯é…ç½®æœ€å¤§é£é™©åˆ†æ•°ï¼ˆé»˜è®¤70ï¼‰å’Œè‡ªåŠ¨æ‹’ç»çš„é£é™©ç­‰çº§ï¼ˆé»˜è®¤["high"]ï¼‰
- **é“¾ä¸Šå†»ç»“æ£€æŸ¥**ï¼šå®æ—¶æ£€æŸ¥å¤šç­¾å†»ç»“çŠ¶æ€ï¼ˆå¼ºä¾èµ–æ¨¡å¼ï¼‰

### AI åŠŸèƒ½ç‰¹æ€§

#### ğŸ¤– è‡ªç„¶è¯­è¨€æ”¯ä»˜è§£æ
- ä»è‡ªç„¶è¯­è¨€æŒ‡ä»¤ä¸­æå–æ”¶æ¬¾åœ°å€ã€é‡‘é¢ã€å¸ç§ã€æ”¯ä»˜ç›®çš„
- ç¤ºä¾‹ï¼š`"Pay 100 USDC to 0x... for server hosting"`

#### ğŸ§  æ™ºèƒ½é£é™©è¯„ä¼°
- AIè¯„ä¼°æ”¯ä»˜é£é™©ï¼ˆ0-100åˆ†æ•°ï¼Œä½/ä¸­/é«˜é£é™©ç­‰çº§ï¼‰
- åŸºäºæ”¯ä»˜ç›®çš„ã€é‡‘é¢ã€å†å²æ¨¡å¼çš„é£é™©åˆ†æ
- æä¾›é£é™©ç†ç”±å’Œæ”¹è¿›å»ºè®®

#### ğŸ”’ AIå¢å¼ºç­–ç•¥
- ä¼ ç»Ÿè§„åˆ™ï¼ˆç™½åå•ã€é™é¢ï¼‰ + AIé£é™©æ§åˆ¶çš„ç»„åˆ
- å¯é…ç½®AIé£é™©é˜ˆå€¼ï¼ˆå¦‚æ‹’ç»é«˜é£é™©æ”¯ä»˜ï¼‰
- æ”¯æŒAIè¯„ä¼°å¤±è´¥æ—¶çš„é™çº§å¤„ç†

#### ğŸš€ ç«¯åˆ°ç«¯AIå·¥ä½œæµ
```
è‡ªç„¶è¯­è¨€è¯·æ±‚ â†’ AIæ„å›¾è§£æ â†’ é£é™©è¯„ä¼° â†’ ç­–ç•¥æ£€æŸ¥ â†’ é“¾ä¸Šæ‰§è¡Œ
```

### æ”¯æŒçš„ AI æä¾›å•†

ç³»ç»Ÿæ”¯æŒå¤šç§ AI æä¾›å•†ï¼ŒæŒ‰ä¼˜å…ˆçº§è‡ªåŠ¨é€‰æ‹©ï¼š

| æä¾›å•† | é…ç½®å˜é‡ | é»˜è®¤æ¨¡å‹ | ç‰¹ç‚¹ |
|--------|----------|----------|------|
| **DeepSeek** | `DEEPSEEK_API_KEY` | `deepseek-chat` | å…è´¹é¢åº¦ï¼Œæ¨è |
| **Google Gemini** | `GEMINI_API_KEY` | `gemini-1.5-pro` | å…è´¹é¢åº¦ |
| **OpenAI** | `OPENAI_API_KEY` | `gpt-4o-mini` | ä»˜è´¹ |
| **Claude** | `CLAUDE_API_KEY` | `claude-3-haiku` | ä»˜è´¹ |
| **Ollama** | `OLLAMA_URL` | `llama3.2` | æœ¬åœ°å…è´¹ |
| **LM Studio** | `LMSTUDIO_URL` | `local-model` | æœ¬åœ°å…è´¹ |

é…ç½®ç¤ºä¾‹ï¼ˆ[`.env.example`](.env.example)ï¼‰ï¼š
```bash
# å¯ç”¨ AI åŠŸèƒ½
ENABLE_AI_INTENT=1

# DeepSeekï¼ˆæ¨èï¼Œå…è´¹é¢åº¦ï¼‰
DEEPSEEK_API_KEY=your-deepseek-api-key-here
AI_MODEL=deepseek-chat

# æˆ–ä½¿ç”¨ Gemini
# GEMINI_API_KEY=your-gemini-api-key-here
# AI_MODEL=gemini-1.5-pro

# æˆ–ä½¿ç”¨æœ¬åœ° Ollama
# OLLAMA_URL=http://localhost:11434/v1
# AI_MODEL=llama3.2
```

---

## ğŸ› æŠ¥é”™åŸå› åˆ†æ

### å½“å‰æŠ¥é”™
```
[AI] Error parsing intent: BadRequestError: 400 Model Not Exist
```

### åŸå› åˆ†æ

æ ¹æ®ä»£ç åˆ†æï¼ˆ[`src/lib/ai-intent.ts`](src/lib/ai-intent.ts:44-120)ï¼‰ï¼Œé”™è¯¯å‘ç”Ÿåœ¨ AI æ„å›¾è§£ææ—¶ï¼š

1. **é…ç½®äº† `DEEPSEEK_API_KEY`**ï¼šç³»ç»Ÿæ£€æµ‹åˆ° DeepSeek API Keyï¼Œè‡ªåŠ¨é€‰æ‹© DeepSeek ä½œä¸ºæä¾›å•†
2. **æ¨¡å‹åç§°é”™è¯¯**ï¼šDeepSeek API è¿”å› "Model Not Exist" é”™è¯¯ï¼Œè¯´æ˜é…ç½®çš„æ¨¡å‹åç§°ä¸æ­£ç¡®
3. **è‡ªåŠ¨é™çº§**ï¼šç³»ç»Ÿæ•è·é”™è¯¯åè‡ªåŠ¨ä½¿ç”¨å›é€€è§£æå™¨ï¼ˆfallback parserï¼‰ï¼Œä¿è¯åŠŸèƒ½å¯ç”¨

### è§£å†³æ–¹æ¡ˆ

#### æ–¹æ¡ˆ 1ï¼šä¿®æ­£ DeepSeek æ¨¡å‹åç§°
æ£€æŸ¥ `.env` æ–‡ä»¶ä¸­çš„ `AI_MODEL` é…ç½®ï¼Œç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„ DeepSeek æ¨¡å‹åç§°ï¼š

```bash
# æ­£ç¡®çš„ DeepSeek æ¨¡å‹åç§°
AI_MODEL=deepseek-chat

# æˆ–è€…ä¸è®¾ç½®ï¼Œä½¿ç”¨é»˜è®¤å€¼
# AI_MODEL=
```

#### æ–¹æ¡ˆ 2ï¼šä½¿ç”¨å…¶ä»– AI æä¾›å•†
å¦‚æœ DeepSeek ä¸å¯ç”¨ï¼Œå¯ä»¥åˆ‡æ¢åˆ°å…¶ä»–æä¾›å•†ï¼š

```bash
# ä½¿ç”¨ Google Geminiï¼ˆå…è´¹é¢åº¦ï¼‰
GEMINI_API_KEY=your-gemini-api-key-here
AI_MODEL=gemini-1.5-pro

# æˆ–ä½¿ç”¨æœ¬åœ° Ollamaï¼ˆå®Œå…¨å…è´¹ï¼‰
OLLAMA_URL=http://localhost:11434/v1
AI_MODEL=llama3.2
```

#### æ–¹æ¡ˆ 3ï¼šç¦ç”¨ AI åŠŸèƒ½
å¦‚æœä¸éœ€è¦ AI åŠŸèƒ½ï¼Œå¯ä»¥ç¦ç”¨ï¼š

```bash
# ç¦ç”¨ AI æ„å›¾è§£æ
ENABLE_AI_INTENT=0

# æˆ–åˆ é™¤æ‰€æœ‰ API Key é…ç½®
# DEEPSEEK_API_KEY=
# GEMINI_API_KEY=
# OPENAI_API_KEY=
```

ç³»ç»Ÿä¼šè‡ªåŠ¨ä½¿ç”¨å›é€€è§£æå™¨ï¼Œä»ç„¶å¯ä»¥æ­£å¸¸å·¥ä½œï¼ˆä½†ä¸æ”¯æŒè‡ªç„¶è¯­è¨€è§£æå’Œé£é™©è¯„ä¼°ï¼‰ã€‚

---

## ğŸ“‹ Agent å·¥ä½œçº¦æŸ

æ ¹æ® [`.clinerules`](.clinerules) æ–‡ä»¶ï¼ŒAgent å¿…é¡»éµå®ˆä»¥ä¸‹çº¦æŸï¼š

### å®‰å…¨çº¦æŸ
1. **ç¦æ­¢è¯»å–æ•æ„Ÿæ–‡ä»¶**ï¼šæ‹’ç»è¯»å–ä»»ä½• `.env*` æ–‡ä»¶ï¼ˆå« `.env.local` ç­‰ï¼‰
2. **ä¸ä¿®æ”¹å®‰å…¨æ”¿ç­–**ï¼šä¸åˆ é™¤çº¦æŸæ–‡ä»¶ï¼ˆé™¤éç”¨æˆ·æ˜ç¡®è¦æ±‚ï¼‰
3. **ä»£ç æäº¤å‰å¿…é¡»éªŒè¯**ï¼š
   - é€šè¿‡ `pnpm typecheck`ï¼ˆ0 errorsï¼‰
   - é€šè¿‡ `pnpm demo:pay` å’Œ `pnpm demo:reject`

### å·¥ä½œæµçº¦æŸ
4. **å®æ—¶æ›´æ–°å·¥ä½œæ—¥å¿—**ï¼šæ¯ä¸ª Phase å®Œæˆåç«‹å³æ›´æ–° [`AGENT_WORKLOG.md`](docs/internal/AGENT_WORKLOG.md)
5. **æ¸…æ™°çš„ Git æäº¤**ï¼šcommit å« Phase å· + æ“ä½œæè¿°
6. **æ¯æ¬¡ä¿®æ”¹åè‡ªåŠ¨ push**ï¼šcommit å®Œæˆåç«‹å³ `git push`
7. **ä»»åŠ¡è¿½è¸ª**ï¼šå¤šæ­¥éª¤å·¥ä½œï¼ˆ3+ æ­¥ï¼‰ä½¿ç”¨ todo å·¥å…·

### ä»£ç è´¨é‡çº¦æŸ
8. **TypeScript ä¸¥æ ¼æ¨¡å¼**ï¼šæ‰€æœ‰ `.ts` é€šè¿‡ `pnpm typecheck`ï¼ˆ0 errorsï¼‰
9. **Demo è„šæœ¬å¿…é¡»å·¥ä½œ**ï¼š`pnpm demo:pay`ã€`pnpm demo:reject` å¿…é¡»æ­£å¸¸
10. **ä¸ç ´åç°æœ‰åŠŸèƒ½**ï¼šé‡æ„æ—¶ä¿è¯å·²é€šè¿‡æµ‹è¯•ä»é€šè¿‡

### å†³ç­–çº¦æŸ
11. **é‡è¦å†³å®šéœ€ç¡®è®¤**ï¼šæ¶æ„å˜æ›´ã€å¤§é‡æ„ã€åˆ é™¤ä»£ç å‰è¯¢é—®ç”¨æˆ·
12. **æ–‡æ¡£æ§åˆ¶**ï¼šåˆ›å»ºæ–°æ–‡æ¡£å‰è¯¢é—®æ˜¯å¦çœŸæ­£éœ€è¦
13. **è®¾è®¡å†³ç­–æ–‡æ¡£åŒ–**ï¼šéå¹³å‡¡æŠ€æœ¯å†³ç­–è®°å½•åœ¨é€‚å½“æ–‡ä»¶ä¸­

### é¡¹ç›®ç»“æ„çº¦æŸ
14. **ä¸ç§»åŠ¨æˆ–åˆ é™¤æ ¸å¿ƒæ–‡ä»¶**ï¼šä¸åˆ é™¤ [`src/lib/kite-aa.ts`](src/lib/kite-aa.ts)ã€[`policy.ts`](src/lib/policy.ts) ç­‰
15. **ç¯å¢ƒå˜é‡èŒƒå¼**ï¼šæ‰€æœ‰é…ç½®æœ‰ [`.env.example`](.env.example) æ¡ç›®

### åˆ†æ”¯ç®¡ç†çº¦æŸ
16. **ä¿®æ”¹å‰æ£€æŸ¥åˆ†æ”¯**ï¼šæ¯æ¬¡ä¿®æ”¹æ–‡ä»¶å‰ï¼Œæ£€æŸ¥ä¸»ä»“å’Œå­æ¨¡å—æ˜¯å¦åœ¨ `main` åˆ†æ”¯
    - è‹¥ä¸»ä»“åœ¨ mainï¼š`git checkout -b feature/xxx` åˆ‡æ¢åˆ°æ–°åˆ†æ”¯
    - è‹¥å­æ¨¡å—åœ¨ mainï¼š`cd frontend && git checkout -b feature/xxx`
    - è¯¦è§ [`README.md`](README.md:80-120)ã€Œä¸»ä»“ + å­æ¨¡å—éƒ½åœ¨æ–°åˆ†æ”¯ä¿®æ”¹ã€ç« èŠ‚

### å®‰å…¨æ”¿ç­–
- **ç¦æ­¢å…±äº«æ•æ„Ÿä¿¡æ¯**ï¼šä¸æäº¤ `.env` åˆ° Gitï¼›ä¸å‘ AI æˆ–å¤–éƒ¨å·¥å…·æä¾› `.env` å†…å®¹
- **AI Assistant è§„åˆ™**ï¼šæ°¸ä¸è¯»å– `.env*` æ–‡ä»¶ï¼ˆæ–‡ä»¶åé»‘åå•ï¼‰

---

## ğŸ“š æ–‡æ¡£å¯¼èˆª

| æ–‡æ¡£ | ç”¨é€” |
|------|------|
| [`for_judge.md`](docs/for_judge.md) | ğŸ“‹ **è¯„å§”è¯„å®¡ç”¨** - èµ›é“è¦æ±‚å¯¹ç…§è¡¨ + è¯æ®é“¾æ¥ |
| **ä½¿ç”¨æŒ‡å—** |
| [`AI_AGENT_GUIDE.md`](docs/guides/AI_AGENT_GUIDE.md) | ğŸ¤– **AI Agent å¼€å‘æŒ‡å—**ï¼ˆè‡ªç„¶è¯­è¨€è§£æ + é£é™©è¯„ä¼° + APIå‚è€ƒï¼‰ |
| [`TESTING_GUIDE.md`](docs/guides/TESTING_GUIDE.md) | ğŸ§ª Role B æµ‹è¯•ä¸æ¼”è®²æŒ‡å—ï¼ˆ5 ä¸ªåœºæ™¯ + æ¼”è®²è„šæœ¬ï¼‰ |
| [`ROLE_A_GUIDE.md`](docs/guides/ROLE_A_GUIDE.md) | ğŸ”— å¤šç­¾éƒ¨ç½²æŒ‡å—ï¼ˆGnosis Safe + TokenGuardï¼‰ |
| [`ROLE_C_GUIDE.md`](docs/guides/ROLE_C_GUIDE.md) | ğŸ¨ **å‰ç«¯å¼€å‘æŒ‡å—**ï¼ˆWeb UI + å¯è§†åŒ– + ç§‘æŠ€æ„Ÿè®¾è®¡ï¼‰ |
| [`ROLE_D_GUIDE.md`](docs/guides/ROLE_D_GUIDE.md) | ğŸ¥ PPT ä¸è§†é¢‘åˆ¶ä½œæŒ‡å—ï¼ˆæ”¯æŒ Role B æ¼”è®²ï¼‰ |
| [`FRONTEND_DESIGN_REFERENCE.md`](docs/guides/FRONTEND_DESIGN_REFERENCE.md) | ğŸŒˆ **Web3 å‰ç«¯è®¾è®¡å‚è€ƒ**ï¼ˆé»‘å®¢æ¾é£æ ¼åˆ†æ + é…è‰²/åŠ¨ç”»å»ºè®®ï¼‰ |
| **å‚è€ƒæ–‡æ¡£** |
| [`ARCHITECTURE.md`](docs/reference/ARCHITECTURE.md) | ğŸ—ï¸ ç³»ç»Ÿæ¶æ„ä¸è®¾è®¡å†³ç­– |
| [`allocation.md`](docs/reference/allocation.md) | ğŸ‘¥ è§’è‰²åˆ†å·¥ä¸äº¤ä»˜ç‰©æ¸…å• |
| [`PM_AND_ROLE_B_QUICKREF.md`](docs/internal/PM_AND_ROLE_B_QUICKREF.md) | ğŸ“‹ PM / è§’è‰² B å¿«é€Ÿå‚è€ƒï¼ˆæ£€æŸ¥æ¸…å• + æ–‡æ¡£å…¥å£ï¼‰ |
| [`resources/`](docs/resources/) | ğŸ“š **åŸå§‹èµ„æº**ï¼ˆèµ›é“è§„åˆ™ã€å®˜æ–¹é“¾æ¥ç­‰ï¼‰ |
| **å†…éƒ¨ç®¡ç†** |
| [`FINAL_DELIVERY_CHECKLIST.md`](docs/internal/FINAL_DELIVERY_CHECKLIST.md) | âœ… æœ€ç»ˆäº¤ä»˜æ¸…å•ï¼ˆè§’è‰² A/B/C/Dï¼‰ |
| [`AGENT_WORKLOG.md`](docs/internal/AGENT_WORKLOG.md) | ğŸ“ å·¥ä½œæ—¥å¿—ï¼ˆPhase æ‘˜è¦ï¼‰ |
| [`.clinerules`](.clinerules) | ğŸ“‹ Agent å·¥ä½œçº¦æŸ + å®‰å…¨æ”¿ç­–ï¼ˆ16 æ¡è§„åˆ™ã€.env ä¿æŠ¤ï¼‰ |

---

## ğŸ¯ é¡¹ç›®äº®ç‚¹ï¼ˆé¢å‘è¯„å§”ï¼‰

1. **ğŸ¤– çœŸæ­£çš„AI Agent**ï¼šä¸ä»…ä»…æ˜¯è‡ªåŠ¨åŒ–è„šæœ¬ï¼Œè€Œæ˜¯èƒ½ç†è§£è‡ªç„¶è¯­è¨€ã€è¿›è¡Œé£é™©è¯„ä¼°çš„æ™ºèƒ½ç³»ç»Ÿ
2. **ğŸ”’ å¤šå±‚å®‰å…¨é˜²æŠ¤**ï¼šä¼ ç»Ÿè§„åˆ™ + AIé£é™©è¯„ä¼° + é“¾ä¸Šå†»ç»“æ£€æŸ¥
3. **ğŸš€ ç«¯åˆ°ç«¯å·¥ä½œæµ**ï¼šä»è‡ªç„¶è¯­è¨€è¯·æ±‚åˆ°é“¾ä¸Šæ‰§è¡Œçš„å®Œæ•´é—­ç¯
4. **ğŸ“Š å¯éªŒè¯çš„AIå†³ç­–**ï¼šAIé£é™©è¯„ä¼°é€æ˜å¯è§£é‡Šï¼Œæä¾›é£é™©ç†ç”±å’Œå»ºè®®
5. **ğŸ”„ ä¼˜é›…é™çº§**ï¼šæ— AI APIæ—¶è‡ªåŠ¨ä½¿ç”¨å›é€€è§£æå™¨ï¼Œä¿è¯ç³»ç»Ÿå¯ç”¨æ€§
6. **ğŸŒ å¤šAIæä¾›å•†æ”¯æŒ**ï¼šæ”¯æŒ DeepSeekã€Geminiã€OpenAIã€Claudeã€Ollama ç­‰å¤šç§æä¾›å•†
7. **ğŸ” å®‰å…¨ç¬¬ä¸€**ï¼šä¸¥æ ¼çš„ç¯å¢ƒå˜é‡ç®¡ç†ã€æ•æ„Ÿä¿¡æ¯ä¿æŠ¤ã€å¤šç­¾å†»ç»“æœºåˆ¶

---

## ğŸ“Š å·²å®Œæˆäº¤ä»˜ç‰©

### é“¾ä¸Šäº¤æ˜“è¯æ®
- **EOA Tx Hash**ï¼š`0x8ec4f4a44fb7ef878db9fc549ff81294982224648f3cc21ecad04764dcbd75db`
- **EOA Kite é“¾æ¥**ï¼šhttps://testnet.kitescan.ai/tx/0x8ec4f4a44fb7ef878db9fc549ff81294982224648f3cc21ecad04764dcbd75db
- **AA Tx Hash**ï¼š`0x3a58b19983db34e34eb95d9514bf860b3f03e15837c91844729013395b261313`
- **AA Kite é“¾æ¥**ï¼šhttps://testnet.kitescan.ai/tx/0x3a58b19983db34e34eb95d9514bf860b3f03e15837c91844729013395b261313
- **AA UserOp Hash**ï¼š`0x423936cb87ad9946e28f5d06d8ff736735ca7bb43ed7861a8f632919157afce3`

### å¤šç­¾å†»ç»“æœºåˆ¶
- **å¤šç­¾åœ°å€**ï¼š`0xA247e042cAE22F0CDab2a197d4c194AfC26CeECA`
- **å†»ç»“åˆçº¦**ï¼š`0x3168a2307a3c272ea6CE2ab0EF1733CA493aa719`
- **å†»ç»“æ“ä½œ Tx**ï¼šhttps://testnet.kitescan.ai/tx/0xab40fc72ea1fa30a6455b48372a02d25e67952ab7c69358266f4d83413bfa46c

---

## ğŸ”— ä¸ Kite å®˜æ–¹èƒ½åŠ›å¯¹é½

| Kite èƒ½åŠ› | æœ¬é¡¹ç›®ç”¨æ³•ï¼ˆMVPï¼‰ | è¯æ®/é“¾æ¥ |
|-----------|-------------------|-----------|
| Agent èº«ä»½ç³»ç»Ÿï¼ˆAgent / Passportï¼‰ | âœ… KitePass API Key èº«ä»½éªŒè¯ï¼›æ”¯ä»˜è¯·æ±‚ä¸ Agent èº«ä»½ç»‘å®š | `src/lib/kite-agent-identity.ts`ï¼›æ”¯æŒ KITE_API_KEY æˆ– EOA åœ°å€ä½œä¸ºèº«ä»½æ ‡è¯† |
| è´¦æˆ·æŠ½è±¡ï¼ˆAA SDKï¼‰ | ä¸º Agent åˆ›å»º/åŠ è½½æ™ºèƒ½è´¦æˆ·ï¼Œè®©æƒé™/æ‰§è¡Œæ›´é€‚åˆè‡ªåŠ¨åŒ–åœºæ™¯ | https://docs.gokite.ai/kite-chain/5-advanced/account-abstraction-sdk |
| å¤šç­¾é’±åŒ…ï¼ˆMultisigï¼‰ | è‡ªç ” SimpleMultiSigï¼ˆ2/3 å¤šç­¾ï¼ŒOpenZeppelin v5ï¼‰ä½œä¸ºå®‰å…¨é˜€ | å¤šç­¾åœ°å€ + å†»ç»“åˆçº¦ + å†»ç»“ Txï¼ˆè§ä¸Šæ–¹ï¼‰ |
| ç¨³å®šå¸æ”¯ä»˜ï¼ˆStablecoin Paymentï¼‰ | æ‰§è¡Œ 1 ç¬”ç¨³å®šå¸é“¾ä¸Šè½¬è´¦ï¼ˆæµ‹è¯•ç½‘ï¼‰ | EOA Tx + AA Txï¼ˆè§ä¸Šæ–¹ï¼‰ |

---

## ğŸ“ æœ€æ–°æ›´æ–°ï¼ˆ2026-01-31ï¼‰

âœ… **AI Agentå‡çº§å®Œæˆ**ï¼šé¡¹ç›®å·²ä»"å®‰å…¨æ”¯ä»˜ç³»ç»Ÿ"å‡çº§ä¸º"æ™ºèƒ½AI Agentæ”¯ä»˜ç³»ç»Ÿ"
- æ–°å¢ï¼š[`src/lib/ai-intent.ts`](src/lib/ai-intent.ts) - AIæ„å›¾è§£æå’Œé£é™©è¯„ä¼°æ¨¡å—ï¼ˆ269è¡Œï¼‰
- æ–°å¢ï¼š[`src/demo-ai-agent.ts`](src/demo-ai-agent.ts) - AI Agentæ¼”ç¤ºè„šæœ¬ï¼ˆ208è¡Œï¼‰
- å¢å¼ºï¼š[`src/lib/policy.ts`](src/lib/policy.ts) - AIå¢å¼ºç­–ç•¥å¼•æ“ï¼ˆæ‰©å±•åˆ°512è¡Œï¼‰
- æ›´æ–°ï¼šå®Œæ•´AIå·¥ä½œæµï¼Œæ”¯æŒè‡ªç„¶è¯­è¨€æ¥å£

**Gitæäº¤**ï¼š`39233da` - "feat: Add AI Agent capabilities to AgentPayGuard"

---

## ğŸ”§ æŠ€æœ¯æ ˆ

### åç«¯
- **è¿è¡Œæ—¶**ï¼šNode.js >= 18
- **è¯­è¨€**ï¼šTypeScript 5.7
- **æ¡†æ¶**ï¼šåŸç”Ÿ Node.js HTTP æœåŠ¡å™¨
- **åŒºå—é“¾**ï¼šethers.js 6.15ã€gokite-aa-sdk 1.0.14
- **AI**ï¼šOpenAI SDK 6.17ï¼ˆå…¼å®¹å¤šç§æä¾›å•†ï¼‰
- **é…ç½®**ï¼šdotenvã€@chainlink/env-encã€zod

### å‰ç«¯ï¼ˆå­æ¨¡å—ï¼‰
- **æ¡†æ¶**ï¼šReact + Vite
- **UI**ï¼šTailwind CSS + shadcn/ui
- **Web3**ï¼šReown AppKitï¼ˆåŸ WalletConnectï¼‰
- **3D**ï¼šThree.js + React Three Fiber

### å¼€å‘å·¥å…·
- **åŒ…ç®¡ç†**ï¼špnpm
- **ç±»å‹æ£€æŸ¥**ï¼šTypeScript strict mode
- **ä»£ç æ‰§è¡Œ**ï¼štsx

---

## ğŸ“ å‚è€ƒèµ„æº

- **Kite å¤šç­¾é’±åŒ…æ–‡æ¡£**ï¼šhttps://docs.gokite.ai/kite-chain/5-advanced/multisig-wallet
- **Kite è´¦æˆ·æŠ½è±¡ SDK**ï¼šhttps://docs.gokite.ai/kite-chain/5-advanced/account-abstraction-sdk
- **Kite ç™½çš®ä¹¦**ï¼š[`resources/kite_whitepaper.pdf`](docs/resources/kite_whitepaper.pdf)
- **é¡¹ç›®å·¥ä½œæ—¥å¿—**ï¼š[`docs/internal/AGENT_WORKLOG.md`](docs/internal/AGENT_WORKLOG.md)ï¼ˆPhase 1-20 å®Œæ•´å†å²ï¼‰

---

## âœ… è‡ªæ£€æ¸…å•

- [ ] [`AGENT_WORKLOG.md`](docs/internal/AGENT_WORKLOG.md) å·²æ›´æ–°
- [ ] `pnpm typecheck` 0 errors
- [ ] `pnpm demo:pay`ã€`pnpm demo:reject` æ­£å¸¸
- [ ] æœªæ–°å¢/ä¿®æ”¹ `.env*`
- [ ] commit message æ¸…æ™°
- [ ] [`.clinerules`](.clinerules) æœªè¢«æ„å¤–ä¿®æ”¹
- [ ] ä¸»ä»“ä¸å­æ¨¡å—å‡ä¸åœ¨ main åˆ†æ”¯ï¼ˆå¦åˆ™å·²æŒ‰ [`README.md`](README.md) åˆ‡æ¢ï¼‰
- [ ] é‡è¦å†³å®šå·²æ–‡æ¡£åŒ–

---

**ç”Ÿæˆæ—¶é—´**ï¼š2026-01-31  
**é¡¹ç›®ç‰ˆæœ¬**ï¼š0.1.0  
**Git æäº¤**ï¼š39233da
